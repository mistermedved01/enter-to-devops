[๐ ะะปะฐะฒะฝะฐั](../../README.md) โ [๐ณ Virtualization-and-Containerization](../../README.md#-virtualization-and-containerization) โ [๐ฆ V-02-Images-and-Containers](../../README.md#-v-02-images-and-containers)

---

# ๐ณV-02-1-Docker-Images
> Docker Images: ัะพะทะดะฐะฝะธะต, ัะฟัะฐะฒะปะตะฝะธะต, ััััะบัััะฐ ะธ ัะฐะฑะพัะฐ ั ะพะฑัะฐะทะฐะผะธ. ะกะปะพะธััะฐั ะฐััะธัะตะบัััะฐ, ัะตะณะธัะพะฒะฐะฝะธะต, ัะฐะฑะพัะฐ ั ัะตะตัััะฐะผะธ.

---

<details>
<summary><b>๐ฏ ะงัะพ ัะฐะบะพะต Docker Image</b></summary>

---

### ะัะฝะพะฒะฝัะต ะฟะพะฝััะธั

```text
# Docker Image - ะฝะตะธะทะผะตะฝัะตะผัะน ัะฐะฑะปะพะฝ ะดะปั ัะพะทะดะฐะฝะธั ะบะพะฝัะตะนะฝะตัะพะฒ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ        Docker Image             โ
โ        (nginx:latest)           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  Read-only ัะปะพะธ                 โ
โ  +โโโโโโโโโโโโโโโโโโโโโโโโโโโ+  โ
โ  โ    App & Config           โ โ Layer 4
โ  +โโโโโโโโโโโโโโโโโโโโโโโโโโโ+  โ
โ  โ    Dependencies           โ โ Layer 3  
โ  +โโโโโโโโโโโโโโโโโโโโโโโโโโโ+  โ
โ  โ    Runtime Environment    โ โ Layer 2
โ  +โโโโโโโโโโโโโโโโโโโโโโโโโโโ+  โ
โ  โ    Base OS                โ โ Layer 1
โ  +โโโโโโโโโโโโโโโโโโโโโโโโโโโ+  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ะะปััะตะฒัะต ัะฐัะฐะบัะตัะธััะธะบะธ:**
- โ **Immutable** - ะฝะตะธะทะผะตะฝัะตะผัะต ะฟะพัะปะต ัะพะทะดะฐะฝะธั
- โ **ะกะปะพะธัััะต** - ัะพััะพัั ะธะท read-only ัะปะพะตะฒ
- โ **ะะตััะธะพะฝะฝะพััั** - ัะตะณะธ ะดะปั ัะฐะทะฝัั ะฒะตััะธะน
- โ **ะะพััะฐัะธะฒะฝัะต** - ัะฐะฑะพัะฐัั ะฒะตะทะดะต, ะณะดะต ะตััั Docker

### ะะฝะฐะปะพะณะธั ั ะฟัะพะณัะฐะผะผะธัะพะฒะฐะฝะธะตะผ

```text
ะะปะฐัั (Image) โ ะญะบะทะตะผะฟะปัั ะบะปะฐััะฐ (Container)
    โ                    โ
ะจะฐะฑะปะพะฝ              ะะฐะฟััะตะฝะฝัะน ะฟัะพัะตัั
```

---

</details>

<details>
<summary><b>๐ฆะกัััะบัััะฐ ะพะฑัะฐะทะฐ</b></summary>

---

### ะกะปะพะธััะฐั ะฐััะธัะตะบัััะฐ

```text
# ะะฐะถะดัะน ัะปะพะน - ััะพ ะธะทะผะตะฝะตะฝะธะต ัะฐะนะปะพะฒะพะน ัะธััะตะผั

โโโโโโโโโโโโโโโโโโโ
โ   ะะพะฝัะตะนะฝะตั     โ
โ   (read-write)  โ โ Read-write ัะปะพะน
โโโโโโโโโโโโโโโโโโโค
โ   ะกะปะพะน: config  โ โ Read-only
โโโโโโโโโโโโโโโโโโโค
โ   ะกะปะพะน: app     โ โ Read-only  
โโโโโโโโโโโโโโโโโโโค
โ   ะกะปะพะน: deps    โ โ Read-only
โโโโโโโโโโโโโโโโโโโค
โ   ะกะปะพะน: base    โ โ Read-only
โโโโโโโโโโโโโโโโโโโ
```

**ะัะตะธะผััะตััะฒะฐ ัะปะพะตะฒ:**
- ๐ **ะญััะตะบัะธะฒะฝะพะต ััะฐะฝะตะฝะธะต** - ะพะฑัะธะต ัะปะพะธ ะฟะตัะตะธัะฟะพะปัะทััััั
- โก **ะััััะฐั ะทะฐะณััะทะบะฐ** - ัะบะฐัะธะฒะฐัััั ัะพะปัะบะพ ะพััััััะฒัััะธะต ัะปะพะธ
- ๐ **ะััะธัะพะฒะฐะฝะธะต ัะฑะพัะบะธ** - ะฝะตะธะทะผะตะฝะตะฝะฝัะต ัะปะพะธ ะฝะต ะฟะตัะตัะพะฑะธัะฐัััั

### ะัะพัะผะพัั ัะปะพะตะฒ ะพะฑัะฐะทะฐ

```bash
# ะัะพัะผะพัั ะธััะพัะธะธ ะพะฑัะฐะทะฐ (ัะปะพะธ)
docker image history nginx:latest

# ะะตัะฐะปัะฝะฐั ะธะฝัะพัะผะฐัะธั ะพะฑ ะพะฑัะฐะทะต
docker image inspect nginx:latest

# ะัะพัะผะพัั ัะฐะทะผะตัะฐ ะพะฑัะฐะทะพะฒ
docker image ls
```

---

</details>

<details>
<summary><b>๐ท๏ธะขะตะณะธัะพะฒะฐะฝะธะต ะพะฑัะฐะทะพะฒ</b></summary>

---

### ะกะธะฝัะฐะบัะธั ัะตะณะพะฒ

```bash
# ะคะพัะผะฐั ะธะผะตะฝะธ ะพะฑัะฐะทะฐ:
[registry/][username/]name:tag

ะัะธะผะตัั:
nginx:latest                    # ะัะธัะธะฐะปัะฝัะน ะพะฑัะฐะท
nginx:1.21-alpine              # ะะพะฝะบัะตัะฝะฐั ะฒะตััะธั
mycompany/app:v1.2.3          # ะะฐััะพะผะฝัะน ะพะฑัะฐะท
localhost:5000/myapp:dev       # ะะพะบะฐะปัะฝัะน registry
```

### ะะฐะฑะพัะฐ ั ัะตะณะฐะผะธ

```bash
# ะกะบะฐัะฐัั ะพะฑัะฐะท ั ัะตะณะพะผ
docker pull nginx:1.21-alpine

# ะขะตะณะธัะพะฒะฐะฝะธะต ัััะตััะฒัััะตะณะพ ะพะฑัะฐะทะฐ
docker tag nginx:latest my-nginx:v1

# ะัะพัะผะพัั ะฒัะตั ัะตะณะพะฒ ะพะฑัะฐะทะฐ
docker image ls nginx

# ะะพะธัะบ ัะตะณะพะฒ ะฒ Docker Hub
docker search nginx --filter is-official=true
```

### Best Practices ัะตะณะธัะพะฒะฐะฝะธั

```text
โะัะฟะพะปัะทัะนัะต ัะตะผะฐะฝัะธัะตัะบะพะต ะฒะตััะธะพะฝะธัะพะฒะฐะฝะธะต: v1.2.3
โะขะตะณ latest ะดะปั ะฟะพัะปะตะดะฝะตะน ััะฐะฑะธะปัะฝะพะน ะฒะตััะธะธ  
โะฃะบะฐะทัะฒะฐะนัะต ะบะพะฝะบัะตัะฝัะต ะฒะตััะธะธ ะดะปั production
โะัะฟะพะปัะทัะนัะต ัะตะณะธ ะดะปั ัะฐะทะฝัั ะพะบััะถะตะฝะธะน: dev, staging, prod
```

---

</details>

<details>
<summary><b>๐ฅะะฐะณััะทะบะฐ ะธ ัะบะฐัะธะฒะฐะฝะธะต</b></summary>

---

### ะะฐะฑะพัะฐ ั Docker Hub

```bash
# ะกะบะฐัะฐัั ะพะฑัะฐะท ะธะท registry
docker pull nginx:latest

# ะะฐะณััะทะธัั ะพะฑัะฐะท ะฒ registry
docker push myusername/myapp:v1.0

# ะะพะนัะธ ะฒ Docker Hub
docker login

# ะัะนัะธ ะธะท Docker Hub
docker logout

# ะกะบะฐัะฐัั ะฒัะต ัะตะณะธ ะพะฑัะฐะทะฐ
docker pull --all-tags nginx
```

### ะะพะบะฐะปัะฝัะต registry

```bash
# ะะฐะฟััะบ ะปะพะบะฐะปัะฝะพะณะพ registry
docker run -d -p 5000:5000 --name registry registry:2

# ะขะตะณะธัะพะฒะฐะฝะธะต ะดะปั ะปะพะบะฐะปัะฝะพะณะพ registry
docker tag myapp:latest localhost:5000/myapp:latest

# ะะฐะณััะทะบะฐ ะฒ ะปะพะบะฐะปัะฝัะน registry  
docker push localhost:5000/myapp:latest

# ะกะบะฐัะธะฒะฐะฝะธะต ะธะท ะปะพะบะฐะปัะฝะพะณะพ registry
docker pull localhost:5000/myapp:latest
```

---

</details>

<details>
<summary><b>๐๏ธะฃะฟัะฐะฒะปะตะฝะธะต ะพะฑัะฐะทะฐะผะธ</b></summary>

---

### ะัะฝะพะฒะฝัะต ะบะพะผะฐะฝะดั

```bash
# ะัะพัะผะพัั ะปะพะบะฐะปัะฝัั ะพะฑัะฐะทะพะฒ
docker image ls
docker images

# ะะพะธัะบ ะพะฑัะฐะทะพะฒ
docker search nginx

# ะะพะปััะตะฝะธะต ะธะฝัะพัะผะฐัะธะธ ะพะฑ ะพะฑัะฐะทะต
docker image inspect nginx:latest

# ะฃะดะฐะปะตะฝะธะต ะพะฑัะฐะทะฐ
docker image rm nginx:latest
docker rmi nginx:latest

# ะัะธะฝัะดะธัะตะปัะฝะพะต ัะดะฐะปะตะฝะธะต
docker rmi -f nginx:latest

# ะัะธััะบะฐ ะฝะตะธัะฟะพะปัะทัะตะผัั ะพะฑัะฐะทะพะฒ
docker image prune
```

### ะคะธะปัััะฐัะธั ะพะฑัะฐะทะพะฒ

```bash
# ะคะธะปัััะฐัะธั ะฟะพ ะธะผะตะฝะธ
docker image ls --filter reference="nginx*"

# ะคะธะปัััะฐัะธั ะดะพ/ะฟะพัะปะต ัะพะทะดะฐะฝะธั
docker image ls --filter "before=nginx:latest"
docker image ls --filter "since=nginx:latest"

# ะคะธะปัััะฐัะธั dangling ะพะฑัะฐะทะพะฒ
docker image ls --filter dangling=true

# ะะพะบะฐะทะฐัั ัะพะปัะบะพ ID ะพะฑัะฐะทะพะฒ
docker image ls -q
```

---

</details>

<details>
<summary><b>๐ะะฝะฐะปะธะท ะพะฑัะฐะทะพะฒ</b></summary>

---

### ะััะปะตะดะพะฒะฐะฝะธะต ัะพะดะตัะถะธะผะพะณะพ

```bash
# ะัะพัะผะพัั ะธััะพัะธะธ ัะฑะพัะบะธ
docker history nginx:latest

# ะัะพัะผะพัั ัะปะพะตะฒ ะฒ ะดะตัะฐะปัั
docker image inspect nginx:latest --format='{{.RootFS.Layers}}'

# ะะฝะฐะปะธะท ัะฐะทะผะตัะฐ
docker system df

# ะะตัะฐะปัะฝัะน ะฐะฝะฐะปะธะท ะพะฑัะฐะทะฐ (ััะตะฑัะตััั dive)
dive nginx:latest
```

### ะกะพะทะดะฐะฝะธะต ะพะฑัะฐะทะฐ ะธะท ะบะพะฝัะตะนะฝะตัะฐ

```bash
# ะกะพะทะดะฐัั ะพะฑัะฐะท ะธะท ะทะฐะฟััะตะฝะฝะพะณะพ ะบะพะฝัะตะนะฝะตัะฐ
docker commit my-container my-image:latest

# ะก ัะบะฐะทะฐะฝะธะตะผ ะฐะฒัะพัะฐ ะธ ัะพะพะฑัะตะฝะธั
docker commit -a "Your Name" -m "Added config" my-container my-image:v2
```

---

</details>

<details>
<summary><b>๐ ะัะฐะบัะธัะตัะบะธะต ะฟัะธะผะตัั</b></summary>

---

### ะะฐะฑะพัะฐ ั ะพะฑัะฐะทะฐะผะธ ะฒ ัะตะฐะปัะฝัั ััะตะฝะฐัะธัั

```bash
# ะกัะตะฝะฐัะธะน 1: ะะธะณัะฐัะธั ะพะฑัะฐะทะฐ ะผะตะถะดั ัะตัะฒะตัะฐะผะธ
docker save -o nginx.tar nginx:latest
# ะะตัะตะฝะพัะธะผ ัะฐะนะป ะธ ะทะฐะณััะถะฐะตะผ:
docker load -i nginx.tar

# ะกัะตะฝะฐัะธะน 2: ะญะบัะฟะพัั/ะธะผะฟะพัั
docker export my-container > container.tar
docker import container.tar my-image:imported

# ะกัะตะฝะฐัะธะน 3: ะกัะฐะฒะฝะตะฝะธะต ะพะฑัะฐะทะพะฒ
docker image inspect image1 > image1.json
docker image inspect image2 > image2.json
diff image1.json image2.json
```

### ะะฟัะธะผะธะทะฐัะธั ัะฐะฑะพัั ั ะพะฑัะฐะทะฐะผะธ

```bash
# ะัะฟะพะปัะทะพะฒะฐะฝะธะต .dockerignore ะดะปั ัะผะตะฝััะตะฝะธั ัะฐะทะผะตัะฐ
echo "node_modules" >> .dockerignore
echo ".git" >> .dockerignore
echo "*.log" >> .dockerignore

# ะะฝะพะณะพััะฐะดะธะนะฝัะต ัะฑะพัะบะธ ะดะปั ะผะธะฝะธะผะธะทะฐัะธะธ ัะฐะทะผะตัะฐ
# (ะฑัะดะตั ัะฐััะผะพััะตะฝะพ ะฒ Dockerfile)
```

---

</details>

<details>
<summary><b>๐ฏะะปััะตะฒัะต ะฒัะฒะพะดั</b></summary>

---

### ะัะฝะพะฒะฝัะต ะบะพะฝัะตะฟัะธะธ

```text
1. ๐ฆะะฑัะฐะทั - ััะพ ัะฐะฑะปะพะฝั ะดะปั ะบะพะฝัะตะนะฝะตัะพะฒ
2. ๐๏ธะกะปะพะธััะฐั ะฐััะธัะตะบัััะฐ ะพะฑะตัะฟะตัะธะฒะฐะตั ัััะตะบัะธะฒะฝะพััั  
3. ๐ท๏ธะขะตะณะธัะพะฒะฐะฝะธะต ะฟะพะทะฒะพะปัะตั ัะฟัะฐะฒะปััั ะฒะตััะธัะผะธ
4. ๐Registry - ัะตะฝััะฐะปะธะทะพะฒะฐะฝะฝะพะต ััะฐะฝะตะฝะธะต ะพะฑัะฐะทะพะฒ
5. ๐พะะพะบะฐะปัะฝะพะต ัะฟัะฐะฒะปะตะฝะธะต - ะพัะฝะพะฒะฐ workflow
```

### Best Practices

```text
โะัะฟะพะปัะทัะนัะต ะบะพะฝะบัะตัะฝัะต ัะตะณะธ ะฒะตััะธะน ะฒ production
โะะตะณัะปััะฝะพ ะพัะธัะฐะนัะต ะฝะตะธัะฟะพะปัะทัะตะผัะต ะพะฑัะฐะทั
โะัะฟะพะปัะทัะนัะต .dockerignore ะดะปั ัะผะตะฝััะตะฝะธั ัะฐะทะผะตัะฐ
โะะฝะฐะปะธะทะธััะนัะต ัะปะพะธ ะดะปั ะพะฟัะธะผะธะทะฐัะธะธ ัะฑะพัะบะธ
โะัะฟะพะปัะทัะนัะต ัะตะผะฐะฝัะธัะตัะบะพะต ะฒะตััะธะพะฝะธัะพะฒะฐะฝะธะต
```

---

</details>
