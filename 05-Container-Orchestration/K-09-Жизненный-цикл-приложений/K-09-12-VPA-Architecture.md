[๐ ะะปะฐะฒะฝะฐั](../../README.md) โ [โธ๏ธ Container-Orchestration](../../README.md#-container-orchestration) โ [๐ K-09-ะะธะทะฝะตะฝะฝัะน-ัะธะบะป-ะฟัะธะปะพะถะตะฝะธะน](../../README.md#-k-09-ะถะธะทะฝะตะฝะฝัะน-ัะธะบะป-ะฟัะธะปะพะถะตะฝะธะน)

---

# ๐K-09-12-VPA-Architecture
>ะััะธัะตะบัััะฐ Vertical Pod Autoscaler (VPA): ะฐะฒัะพะผะฐัะธัะตัะบะฐั ะฝะฐัััะพะนะบะฐ ัะตััััะพะฒ Pod, ะบะพะผะฟะพะฝะตะฝัั (Recommender, Updater, Admission Controller), ัะตะถะธะผั ะพะฑะฝะพะฒะปะตะฝะธั, ะฟะพะปะธัะธะบะธ ัะตััััะพะฒ

---

<details>
<summary><b>๐ะะฒะตะดะตะฝะธะต: ััะพ ัะฐะบะพะต VPA</b></summary>

---

## Vertical Pod Autoscaler

VerticalPodAutoscaler (VPA) ะฐะฒัะพะผะฐัะธัะตัะบะธ ะพะฑะฝะพะฒะปัะตั ัะตััััั ัะฟัะฐะฒะปะตะฝะธั ัะฐะฑะพัะธะผะธ ะฝะฐะณััะทะบะฐะผะธ (ัะฐะบะธะต ะบะฐะบ Deployment ะธะปะธ StatefulSet), ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฝะฐัััะฐะธะฒะฐั ะทะฐะฟัะพัั ะธ ะปะธะผะธัั ัะตััััะพะฒ ะธะฝััะฐััััะบัััั ะฒ ัะพะพัะฒะตัััะฒะธะธ ั ัะฐะบัะธัะตัะบะธะผ ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ.

### ะะตััะธะบะฐะปัะฝะพะต ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะต

ะะตััะธะบะฐะปัะฝะพะต ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะต ะพะทะฝะฐัะฐะตั, ััะพ ะฒ ะพัะฒะตั ะฝะฐ ัะฒะตะปะธัะตะฝะธะต ัะฟัะพัะฐ ะฝะฐ ัะตััััั ะฝะฐะทะฝะฐัะฐะตััั ะฑะพะปััะต ัะตััััะพะฒ (ะฝะฐะฟัะธะผะตั, ะฟะฐะผััะธ ะธะปะธ CPU) ัะถะต ะทะฐะฟััะตะฝะฝัะผ Pod ะดะปั ัะฐะฑะพัะตะน ะฝะฐะณััะทะบะธ. ะญัะพ ัะฐะบะถะต ะธะทะฒะตััะฝะพ ะบะฐะบ rightsizing ะธะปะธ autopilot.

**ะัะปะธัะธะต ะพั ะณะพัะธะทะพะฝัะฐะปัะฝะพะณะพ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธั:**

- **ะะตััะธะบะฐะปัะฝะพะต ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะต (VPA):** ัะฒะตะปะธัะตะฝะธะต ัะตััััะพะฒ ัััะตััะฒัััะธั Pod
- **ะะพัะธะทะพะฝัะฐะปัะฝะพะต ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะต (HPA):** ัะฐะทะฒะตัััะฒะฐะฝะธะต ะดะพะฟะพะปะฝะธัะตะปัะฝัั Pod ะดะปั ัะฐัะฟัะตะดะตะปะตะฝะธั ะฝะฐะณััะทะบะธ

### ะะฒัะพะผะฐัะธัะตัะบะฐั ะพะฟัะธะผะธะทะฐัะธั ัะตััััะพะฒ

ะัะปะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ัะตััััะพะฒ ัะผะตะฝััะฐะตััั, ะฐ ะทะฐะฟัะพัั ัะตััััะพะฒ Pod ะฟัะตะฒััะฐัั ะพะฟัะธะผะฐะปัะฝัะต ััะพะฒะฝะธ, VerticalPodAutoscaler ะธะฝััััะบัะธััะตั ัะตัััั ัะฐะฑะพัะตะน ะฝะฐะณััะทะบะธ (Deployment, StatefulSet ะธะปะธ ะฐะฝะฐะปะพะณะธัะฝัะน ัะตัััั) ัะบะพััะตะบัะธัะพะฒะฐัั ะทะฐะฟัะพัั ัะตััััะพะฒ ะฒะฝะธะท, ะฟัะตะดะพัะฒัะฐัะฐั ัะฐััะพัะธัะตะปัััะฒะพ ัะตััััะพะฒ.

### ะะตะฐะปะธะทะฐัะธั

VerticalPodAutoscaler ัะตะฐะปะธะทะพะฒะฐะฝ ะบะฐะบ ัะตัััั Kubernetes API ะธ ะบะพะฝััะพะปะปะตั. ะะตัััั ะพะฟัะตะดะตะปัะตั ะฟะพะฒะตะดะตะฝะธะต ะบะพะฝััะพะปะปะตัะฐ. ะะพะฝััะพะปะปะตั ะฒะตััะธะบะฐะปัะฝะพะณะพ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธั Pod, ัะฐะฑะพัะฐััะธะน ะฒ ะฟะปะพัะบะพััะธ ะดะฐะฝะฝัั Kubernetes, ะฟะตัะธะพะดะธัะตัะบะธ ะบะพััะตะบัะธััะตั ะทะฐะฟัะพัั ะธ ะปะธะผะธัั ัะตััััะพะฒ ัะฒะพะตะน ัะตะปะธ (ะฝะฐะฟัะธะผะตั, Deployment) ะฝะฐ ะพัะฝะพะฒะต:

- ะะฝะฐะปะธะทะฐ ะธััะพัะธัะตัะบะพะณะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั ัะตััััะพะฒ
- ะะพะปะธัะตััะฒะฐ ะดะพัััะฟะฝัั ัะตััััะพะฒ ะฒ ะบะปะฐััะตัะต
- ะกะพะฑััะธะน ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ, ัะฐะบะธั ะบะฐะบ ััะปะพะฒะธั ะฝะตัะฒะฐัะบะธ ะฟะฐะผััะธ (OOM)

---

</details>

<details>
<summary><b>๐API ะพะฑัะตะบั VPA</b></summary>

---

## Custom Resource Definition

VerticalPodAutoscaler ะพะฟัะตะดะตะปัะตััั ะบะฐะบ Custom Resource Definition (CRD) ะฒ Kubernetes. ะ ะพัะปะธัะธะต ะพั HorizontalPodAutoscaler, ะบะพัะพััะน ัะฒะปัะตััั ัะฐัััั ะพัะฝะพะฒะฝะพะณะพ API Kubernetes, VPA ะดะพะปะถะตะฝ ะฑััั ัััะฐะฝะพะฒะปะตะฝ ะพัะดะตะปัะฝะพ ะฒ ะบะปะฐััะตัะต.

### ะะตััะธั API

ะขะตะบััะฐั ััะฐะฑะธะปัะฝะฐั ะฒะตััะธั API โ `autoscaling.k8s.io/v1`.

### ะฃััะฐะฝะพะฒะบะฐ

VPA ะฝะต ะฒัะพะดะธั ะฒ ััะฐะฝะดะฐััะฝัั ัััะฐะฝะพะฒะบั Kubernetes ะธ ััะตะฑัะตั ะพัะดะตะปัะฝะพะน ัััะฐะฝะพะฒะบะธ. ะะพะดัะพะฑะฝะพััะธ ะพะฑ ัััะฐะฝะพะฒะบะต VPA ะธ API ะผะพะถะฝะพ ะฝะฐะนัะธ ะฒ ัะตะฟะพะทะธัะพัะธะธ VPA ะฝะฐ GitHub.

> **ะัะธะผะตัะฐะฝะธะต:** VPA ัะพััะพะธั ะธะท ะฝะตัะบะพะปัะบะธั ะบะพะผะฟะพะฝะตะฝัะพะฒ, ะบะพัะพััะต ะดะพะปะถะฝั ะฑััั ัััะฐะฝะพะฒะปะตะฝั ะฒ ะบะปะฐััะตัะต: Recommender, Updater, Admission Controller.

---

</details>

<details>
<summary><b>๐๏ธะััะธัะตะบัััะฐ VPA: ะบะพะผะฟะพะฝะตะฝัั</b></summary>

---

## ะะพะผะฟะพะฝะตะฝัั Vertical Pod Autoscaler

Kubernetes ัะตะฐะปะธะทัะตั ะฒะตััะธะบะฐะปัะฝะพะต ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะต Pod ัะตัะตะท ะฝะตัะบะพะปัะบะพ ะฒะทะฐะธะผะพะดะตะนััะฒัััะธั ะบะพะผะฟะพะฝะตะฝัะพะฒ, ะบะพัะพััะต ัะฐะฑะพัะฐัั ะฟะตัะธะพะดะธัะตัะบะธ (ััะพ ะฝะต ะฝะตะฟัะตััะฒะฝัะน ะฟัะพัะตัั). VPA ัะพััะพะธั ะธะท ััะตั ะพัะฝะพะฒะฝัั ะบะพะผะฟะพะฝะตะฝัะพะฒ:

### 1. Recommender (ะะตะบะพะผะตะฝะดะฐัะตะปั)

ะะฝะฐะปะธะทะธััะตั ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ัะตััััะพะฒ ะธ ะฟัะตะดะพััะฐะฒะปัะตั ัะตะบะพะผะตะฝะดะฐัะธะธ.

**ะคัะฝะบัะธะธ:**
- ะะฐะฟัะฐัะธะฒะฐะตั ะผะตััะธะบะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธั ัะตััััะพะฒ ะดะปั Pod, ะฝะฐัะตะปะตะฝะฝัั ะฝะฐ ะบะฐะถะดัะน VerticalPodAutoscaler
- ะะฐัะพะดะธั ัะตะปะตะฒะพะน ัะตัััั, ะพะฟัะตะดะตะปะตะฝะฝัะน ะฒ `targetRef`
- ะัะฑะธัะฐะตั Pod ะฝะฐ ะพัะฝะพะฒะต ะผะตัะพะบ ัะตะปะตะบัะพัะฐ ัะตะปะตะฒะพะณะพ ัะตััััะฐ
- ะะพะปััะฐะตั ะผะตััะธะบะธ ะธะท API ะผะตััะธะบ ัะตััััะพะฒ ะดะปั ะฐะฝะฐะปะธะทะฐ ัะฐะบัะธัะตัะบะพะณะพ ะฟะพััะตะฑะปะตะฝะธั CPU ะธ ะฟะฐะผััะธ

### 2. Updater (ะะฑะฝะพะฒะปัััะธะน ะบะพะผะฟะพะฝะตะฝั)

ะะฑะฝะพะฒะปัะตั ะทะฐะฟัะพัั ัะตััััะพะฒ Pod ะปะธะฑะพ ะฟััะตะผ ะฒััะตัะฝะตะฝะธั Pod, ะปะธะฑะพ ะฟััะตะผ ะธั ะผะพะดะธัะธะบะฐัะธะธ ะฝะฐ ะผะตััะต.

**ะคัะฝะบัะธะธ:**
- ะะพะฝะธัะพัะธั ัะตััััั VerticalPodAutoscaler
- ะกัะฐะฒะฝะธะฒะฐะตั ัะตะบััะธะต ะทะฐะฟัะพัั ัะตััััะพะฒ Pod ั ัะตะบะพะผะตะฝะดะฐัะธัะผะธ
- ะัะธ ะฟัะตะฒััะตะฝะธะธ ะฟะพัะพะณะพะฒัั ะทะฝะฐัะตะฝะธะน ะธ ัะฐะทัะตัะตะฝะธะธ ะฟะพะปะธัะธะบะธ ะพะฑะฝะพะฒะปะตะฝะธั:
  - ะััะตัะฝัะตั Pod, ะฒัะทัะฒะฐั ะธั ะฟะตัะตัะพะทะดะฐะฝะธะต ั ะฝะพะฒัะผะธ ะทะฐะฟัะพัะฐะผะธ ัะตััััะพะฒ (ััะฐะดะธัะธะพะฝะฝัะน ะฟะพะดัะพะด)
  - ะะฑะฝะพะฒะปัะตั ัะตััััั Pod ะฝะฐ ะผะตััะต ะฑะตะท ะฒััะตัะฝะตะฝะธั, ะบะพะณะดะฐ ะบะปะฐััะตั ะฟะพะดะดะตัะถะธะฒะฐะตั ะพะฑะฝะพะฒะปะตะฝะธั ัะตััััะพะฒ Pod ะฝะฐ ะผะตััะต

### 3. VPA Admission Controller (ะะตะฑััะบ ะบะพะฝััะพะปะปะตัะฐ ะดะพะฟััะบะฐ)

ะะตะฑััะบ, ะบะพัะพััะน ะฟัะธะผะตะฝัะตั ัะตะบะพะผะตะฝะดะฐัะธะธ ะฟะพ ัะตััััะฐะผ ะบ ะฝะพะฒัะผ ะธะปะธ ะฟะตัะตัะพะทะดะฐะฝะฝัะผ Pod.

**ะคัะฝะบัะธะธ:**
- ะะฐะฑะพัะฐะตั ะบะฐะบ ะผััะธััััะธะน ะฒะตะฑััะบ, ะฟะตัะตัะฒะฐััะฒะฐััะธะน ะทะฐะฟัะพัั ะฝะฐ ัะพะทะดะฐะฝะธะต Pod
- ะัะพะฒะตััะตั, ะฝะฐัะตะปะตะฝ ะปะธ Pod ะฝะฐ VerticalPodAutoscaler
- ะัะธะผะตะฝัะตั ัะตะบะพะผะตะฝะดัะตะผัะต ะทะฐะฟัะพัั ะธ ะปะธะผะธัั ัะตััััะพะฒ ะฟะตัะตะด ัะพะทะดะฐะฝะธะตะผ Pod
- ะัะฟะพะปัะทัะตั ัะตะบะพะผะตะฝะดะฐัะธั Target ะฒ ะฟะพะปะต `.status.recommendation` ัะตััััะฐ VerticalPodAutoscaler

### ะกัะตะผะฐ ัะฐะฑะพัั VPA

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Application Workload                                   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ  Deployment / StatefulSet                        โ   โ
โ  โ  โโโโโโโโโโโโโโ  โโโโโโโโโโโโโโ                 โ   โ
โ  โ  โ Pod 1      โ  โ Pod 2      โ                 โ   โ
โ  โ  โโโโโโโฌโโโโโโโ  โโโโโโโฌโโโโโโโ                 โ   โ
โ  โโโโโโโโโผโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ          โ                โ                            โ
โ          โโโโโโโโโโฌโโโโโโโโ                            โ
โ                   โผ                                     โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ  Metrics Server                                  โ   โ
โ  โ  ะกะพะฑะธัะฐะตั ะผะตััะธะบะธ CPU/Memory                     โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                   โ                                     โ
โ                   โผ                                     โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ  VPA Recommender                                  โ   โ
โ  โ  - ะะฝะฐะปะธะทะธััะตั ะธััะพัะธัะตัะบะธะต ะดะฐะฝะฝัะต                โ   โ
โ  โ  - ะะฐัััะธััะฒะฐะตั ัะตะบะพะผะตะฝะดะฐัะธะธ                     โ   โ
โ  โ  - ะกะพััะฐะฝัะตั ะฒ .status.recommendation             โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                   โ                                     โ
โ                   โผ                                     โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ  VPA Updater                                      โ   โ
โ  โ  - ะกัะฐะฒะฝะธะฒะฐะตั ัะตะบััะธะต ะทะฐะฟัะพัั ั ัะตะบะพะผะตะฝะดะฐัะธัะผะธ   โ   โ
โ  โ  - ะััะตัะฝัะตั Pod ะธะปะธ ะพะฑะฝะพะฒะปัะตั ะฝะฐ ะผะตััะต          โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                   โ                                     โ
โ                   โผ                                     โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ  VPA Admission Controller                        โ   โ
โ  โ  - ะะตัะตัะฒะฐััะฒะฐะตั ัะพะทะดะฐะฝะธะต Pod                     โ   โ
โ  โ  - ะัะธะผะตะฝัะตั ัะตะบะพะผะตะฝะดะฐัะธะธ ะบ ะฝะพะฒัะผ Pod            โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                   โ                                     โ
โ                   โผ                                     โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ  API Server                                       โ   โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ   โ
โ  โ  โ  VerticalPodAutoscaler CRD                   โ โ   โ
โ  โ  โ  - targetRef                                  โ โ   โ
โ  โ  โ  - updatePolicy                               โ โ   โ
โ  โ  โ  - resourcePolicy                             โ โ   โ
โ  โ  โ  - .status.recommendation                     โ โ   โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

</details>

<details>
<summary><b>๐ะฆะธะบะป ัะฐะฑะพัั VPA</b></summary>

---

## ะัะพัะตัั ัะฐะฑะพัั Vertical Pod Autoscaler

### 1. ะกะฑะพั ะผะตััะธะบ

Recommender ะฟะตัะธะพะดะธัะตัะบะธ ะทะฐะฟัะฐัะธะฒะฐะตั ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ัะตััััะพะฒ ะดะปั Pod, ะฝะฐัะตะปะตะฝะฝัั ะฝะฐ ะบะฐะถะดัะน VerticalPodAutoscaler:

1. ะะฐัะพะดะธั ัะตะปะตะฒะพะน ัะตัััั, ะพะฟัะตะดะตะปะตะฝะฝัะน ะฒ `targetRef`
2. ะัะฑะธัะฐะตั Pod ะฝะฐ ะพัะฝะพะฒะต ะผะตัะพะบ ัะตะปะตะบัะพัะฐ ัะตะปะตะฒะพะณะพ ัะตััััะฐ
3. ะะพะปััะฐะตั ะผะตััะธะบะธ ะธะท API ะผะตััะธะบ ัะตััััะพะฒ ะดะปั ะฐะฝะฐะปะธะทะฐ ัะฐะบัะธัะตัะบะพะณะพ ะฟะพััะตะฑะปะตะฝะธั CPU ะธ ะฟะฐะผััะธ

### 2. ะะฝะฐะปะธะท ะดะฐะฝะฝัั

Recommender ะฐะฝะฐะปะธะทะธััะตั ะบะฐะบ ัะตะบััะธะต, ัะฐะบ ะธ ะธััะพัะธัะตัะบะธะต ะดะฐะฝะฝัะต ะพะฑ ะธัะฟะพะปัะทะพะฒะฐะฝะธะธ ัะตััััะพะฒ (CPU ะธ ะฟะฐะผััั) ะดะปั ะบะฐะถะดะพะณะพ Pod, ะฝะฐัะตะปะตะฝะฝะพะณะพ ะฝะฐ VerticalPodAutoscaler. ะััะปะตะดัะตั:

- **ะััะพัะธัะตัะบะธะต ะฟะฐััะตัะฝั ะฟะพััะตะฑะปะตะฝะธั** ะฒะพ ะฒัะตะผะตะฝะธ ะดะปั ะฒััะฒะปะตะฝะธั ััะตะฝะดะพะฒ
- **ะะธะบะพะฒะพะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะธ ะฒะฐัะธะฐัะธะฒะฝะพััั** ะดะปั ะพะฑะตัะฟะตัะตะฝะธั ะดะพััะฐัะพัะฝะพะณะพ ะทะฐะฟะฐัะฐ
- **ะกะพะฑััะธั ะฝะตัะฒะฐัะบะธ ะฟะฐะผััะธ (OOM)** ะธ ะดััะณะธะต ะธะฝัะธะดะตะฝัั, ัะฒัะทะฐะฝะฝัะต ั ัะตััััะฐะผะธ

### 3. ะะฐััะตั ัะตะบะพะผะตะฝะดะฐัะธะน

ะะฐ ะพัะฝะพะฒะต ััะพะณะพ ะฐะฝะฐะปะธะทะฐ Recommender ัะฐัััะธััะฒะฐะตั ััะธ ัะธะฟะฐ ัะตะบะพะผะตะฝะดะฐัะธะน:

- **Target recommendation** โ ะพะฟัะธะผะฐะปัะฝัะต ัะตััััั ะดะปั ัะธะฟะธัะฝะพะณะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั
- **Lower bound** โ ะผะธะฝะธะผะฐะปัะฝะพ ะถะธะทะฝะตัะฟะพัะพะฑะฝัะต ัะตััััั
- **Upper bound** โ ะผะฐะบัะธะผะฐะปัะฝะพ ัะฐะทัะผะฝัะต ัะตััััั

ะญัะธ ัะตะบะพะผะตะฝะดะฐัะธะธ ัะพััะฐะฝััััั ะฒ ะฟะพะปะต `.status.recommendation` ัะตััััะฐ VerticalPodAutoscaler.

### 4. ะัะธะผะตะฝะตะฝะธะต ัะตะบะพะผะตะฝะดะฐัะธะน

#### Updater

ะะพะผะฟะพะฝะตะฝั Updater ะผะพะฝะธัะพัะธั ัะตััััั VerticalPodAutoscaler ะธ ััะฐะฒะฝะธะฒะฐะตั ัะตะบััะธะต ะทะฐะฟัะพัั ัะตััััะพะฒ Pod ั ัะตะบะพะผะตะฝะดะฐัะธัะผะธ. ะะพะณะดะฐ ัะฐะทะฝะธัะฐ ะฟัะตะฒััะฐะตั ะฝะฐัััะพะตะฝะฝัะต ะฟะพัะพะณะธ ะธ ะฟะพะปะธัะธะบะฐ ะพะฑะฝะพะฒะปะตะฝะธั ัะฐะทัะตัะฐะตั ััะพ, updater ะผะพะถะตั:

- **ะััะตัะฝะธัั Pod**, ะฒัะทัะฒะฐั ะธั ะฟะตัะตัะพะทะดะฐะฝะธะต ั ะฝะพะฒัะผะธ ะทะฐะฟัะพัะฐะผะธ ัะตััััะพะฒ (ััะฐะดะธัะธะพะฝะฝัะน ะฟะพะดัะพะด)
- **ะะฑะฝะพะฒะธัั ัะตััััั Pod ะฝะฐ ะผะตััะต** ะฑะตะท ะฒััะตัะฝะตะฝะธั, ะบะพะณะดะฐ ะบะปะฐััะตั ะฟะพะดะดะตัะถะธะฒะฐะตั ะพะฑะฝะพะฒะปะตะฝะธั ัะตััััะพะฒ Pod ะฝะฐ ะผะตััะต

ะัะฑัะฐะฝะฝัะน ะผะตัะพะด ะทะฐะฒะธัะธั ะพั ะฝะฐัััะพะตะฝะฝะพะณะพ ัะตะถะธะผะฐ ะพะฑะฝะพะฒะปะตะฝะธั, ะฒะพะทะผะพะถะฝะพััะตะน ะบะปะฐััะตัะฐ ะธ ัะธะฟะฐ ะฝะตะพะฑัะพะดะธะผะพะณะพ ะธะทะผะตะฝะตะฝะธั ัะตััััะพะฒ. Updater ััะธััะฒะฐะตั PodDisruptionBudgets ะดะปั ะผะธะฝะธะผะธะทะฐัะธะธ ะฒะปะธัะฝะธั ะฝะฐ ัะตัะฒะธั.

#### Admission Controller

ะะพะฝััะพะปะปะตั ะดะพะฟััะบะฐ ัะฐะฑะพัะฐะตั ะบะฐะบ ะผััะธััััะธะน ะฒะตะฑััะบ, ะบะพัะพััะน ะฟะตัะตัะฒะฐััะฒะฐะตั ะทะฐะฟัะพัั ะฝะฐ ัะพะทะดะฐะฝะธะต Pod. ะะฝ ะฟัะพะฒะตััะตั, ะฝะฐัะตะปะตะฝ ะปะธ Pod ะฝะฐ VerticalPodAutoscaler, ะธ ะตัะปะธ ะดะฐ, ะฟัะธะผะตะฝัะตั ัะตะบะพะผะตะฝะดัะตะผัะต ะทะฐะฟัะพัั ะธ ะปะธะผะธัั ัะตััััะพะฒ ะฟะตัะตะด ัะพะทะดะฐะฝะธะตะผ Pod. ะะพะปะตะต ะบะพะฝะบัะตัะฝะพ, ะบะพะฝััะพะปะปะตั ะดะพะฟััะบะฐ ะธัะฟะพะปัะทัะตั ัะตะบะพะผะตะฝะดะฐัะธั Target ะฒ ะฟะพะปะต `.status.recommendation` ัะตััััะฐ VerticalPodAutoscaler ะฒ ะบะฐัะตััะฒะต ะฝะพะฒัั ะทะฐะฟัะพัะพะฒ ัะตััััะพะฒ.

ะะพะฝััะพะปะปะตั ะดะพะฟััะบะฐ ะพะฑะตัะฟะตัะธะฒะฐะตั, ััะพะฑั ะฝะพะฒัะต Pod ะทะฐะฟััะบะฐะปะธัั ั ัะพะพัะฒะตัััะฒัััะธะผ ัะฐะทะผะตัะพะผ ะฒัะดะตะปะตะฝะธั ัะตััััะพะฒ, ะฝะตะทะฐะฒะธัะธะผะพ ะพั ัะพะณะพ, ัะพะทะดะฐัััั ะปะธ ะพะฝะธ ะฒะพ ะฒัะตะผั ะฟะตัะฒะพะฝะฐัะฐะปัะฝะพะณะพ ัะฐะทะฒะตัััะฒะฐะฝะธั, ะฟะพัะปะต ะฒััะตัะฝะตะฝะธั updater'ะพะผ ะธะปะธ ะธะท-ะทะฐ ะพะฟะตัะฐัะธะน ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธั.

### 5. ะขัะตะฑะพะฒะฐะฝะธั ะบ ะผะตััะธะบะฐะผ

VerticalPodAutoscaler ััะตะฑัะตั ะธััะพัะฝะธะบ ะผะตััะธะบ, ัะฐะบะพะน ะบะฐะบ ะดะพะฟะพะปะฝะตะฝะธะต Metrics Server Kubernetes, ัััะฐะฝะพะฒะปะตะฝะฝะพะต ะฒ ะบะปะฐััะตัะต. ะะพะผะฟะพะฝะตะฝัั VPA ะฟะพะปััะฐัั ะผะตััะธะบะธ ะธะท API `metrics.k8s.io`. Metrics Server ะดะพะปะถะตะฝ ะฑััั ะทะฐะฟััะตะฝ ะพัะดะตะปัะฝะพ, ัะฐะบ ะบะฐะบ ะพะฝ ะฝะต ัะฐะทะฒะตัััะฒะฐะตััั ะฟะพ ัะผะพะปัะฐะฝะธั ะฒ ะฑะพะปััะธะฝััะฒะต ะบะปะฐััะตัะพะฒ.

---

</details>

<details>
<summary><b>โ๏ธะะตะถะธะผั ะพะฑะฝะพะฒะปะตะฝะธั (Update Modes)</b></summary>

---

## Update Modes

VerticalPodAutoscaler ะฟะพะดะดะตัะถะธะฒะฐะตั ัะฐะทะปะธัะฝัะต ัะตะถะธะผั ะพะฑะฝะพะฒะปะตะฝะธั, ะบะพัะพััะต ะบะพะฝััะพะปะธัััั, ะบะฐะบ ะธ ะบะพะณะดะฐ ัะตะบะพะผะตะฝะดะฐัะธะธ ะฟะพ ัะตััััะฐะผ ะฟัะธะผะตะฝััััั ะบ Pod. ะะตะถะธะผ ะพะฑะฝะพะฒะปะตะฝะธั ะฝะฐัััะฐะธะฒะฐะตััั ั ะฟะพะผะพััั ะฟะพะปั `updateMode` ะฒ ัะฟะตัะธัะธะบะฐัะธะธ VPA ะฟะพะด `updatePolicy`:

```yaml
apiVersion: autoscaling.k8s.io/v1
kind: VerticalPodAutoscaler
metadata:
  name: my-app-vpa
spec:
  targetRef:
    apiVersion: "apps/v1"
    kind: Deployment
    name: my-app
  updatePolicy:
    updateMode: "Recreate"  # Off, Initial, Recreate, InPlaceOrRecreate
```

### Off (ะัะบะปััะตะฝ)

ะ ัะตะถะธะผะต Off VPA recommender ะฟะพ-ะฟัะตะถะฝะตะผั ะฐะฝะฐะปะธะทะธััะตั ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ัะตััััะพะฒ ะธ ะณะตะฝะตัะธััะตั ัะตะบะพะผะตะฝะดะฐัะธะธ, ะฝะพ ััะธ ัะตะบะพะผะตะฝะดะฐัะธะธ ะฝะต ะฟัะธะผะตะฝััััั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะบ Pod. ะะตะบะพะผะตะฝะดะฐัะธะธ ัะพััะฐะฝััััั ัะพะปัะบะพ ะฒ ะฟะพะปะต `.status` ะพะฑัะตะบัะฐ VPA.

**ะัะฟะพะปัะทะพะฒะฐะฝะธะต:**
- ะัะพัะผะพัั ัะตะบะพะผะตะฝะดะฐัะธะน ัะตัะตะท `kubectl` ะฑะตะท ะธั ะฟัะธะผะตะฝะตะฝะธั
- ะะฝะฐะปะธะท ะธ ะฟะปะฐะฝะธัะพะฒะฐะฝะธะต ะธะทะผะตะฝะตะฝะธะน ัะตััััะพะฒ
- ะขะตััะธัะพะฒะฐะฝะธะต ัะตะบะพะผะตะฝะดะฐัะธะน ะฟะตัะตะด ะฟัะธะผะตะฝะตะฝะธะตะผ

**ะัะธะผะตั:**

```bash
# ะัะพัะผะพัั ัะตะบะพะผะตะฝะดะฐัะธะน
kubectl get vpa my-app-vpa -o yaml
```

### Initial (ะะฐัะฐะปัะฝัะน)

ะ ัะตะถะธะผะต Initial VPA ัััะฐะฝะฐะฒะปะธะฒะฐะตั ะทะฐะฟัะพัั ัะตััััะพะฒ ัะพะปัะบะพ ะฟัะธ ะฟะตัะฒะพะผ ัะพะทะดะฐะฝะธะธ Pod. ะะฝ ะฝะต ะพะฑะฝะพะฒะปัะตั ัะตััััั ะดะปั ัะถะต ะทะฐะฟััะตะฝะฝัั Pod, ะดะฐะถะต ะตัะปะธ ัะตะบะพะผะตะฝะดะฐัะธะธ ะธะทะผะตะฝััััั ัะพ ะฒัะตะผะตะฝะตะผ. ะะตะบะพะผะตะฝะดะฐัะธะธ ะฟัะธะผะตะฝััััั ัะพะปัะบะพ ะฒะพ ะฒัะตะผั ัะพะทะดะฐะฝะธั Pod.

**ะัะฟะพะปัะทะพะฒะฐะฝะธะต:**
- ะฃััะฐะฝะพะฒะบะฐ ะฟัะฐะฒะธะปัะฝัั ัะตััััะพะฒ ะดะปั ะฝะพะฒัั Pod
- ะะทะฑะตะถะฐะฝะธะต ะฟะตัะตะทะฐะฟััะบะฐ ัััะตััะฒัััะธั Pod
- ะะพััะตะฟะตะฝะฝะพะต ะพะฑะฝะพะฒะปะตะฝะธะต ัะตััััะพะฒ ะฟัะธ ะตััะตััะฒะตะฝะฝะพะผ ะพะฑะฝะพะฒะปะตะฝะธะธ Pod

### Recreate (ะะตัะตัะพะทะดะฐะฝะธะต)

ะ ัะตะถะธะผะต Recreate VPA ะฐะบัะธะฒะฝะพ ัะฟัะฐะฒะปัะตั ัะตััััะฐะผะธ Pod, ะฒััะตัะฝัั Pod, ะบะพะณะดะฐ ะธั ัะตะบััะธะต ะทะฐะฟัะพัั ัะตััััะพะฒ ะทะฝะฐัะธัะตะปัะฝะพ ะพัะปะธัะฐัััั ะพั ัะตะบะพะผะตะฝะดะฐัะธะน. ะะพะณะดะฐ Pod ะฒััะตัะฝัะตััั, ะบะพะฝััะพะปะปะตั ัะฐะฑะพัะตะน ะฝะฐะณััะทะบะธ (ัะฟัะฐะฒะปัััะธะน Deployment, StatefulSet ะธ ั.ะด.) ัะพะทะดะฐะตั ะทะฐะผะตะฝัััะธะน Pod, ะธ VPA ะบะพะฝััะพะปะปะตั ะดะพะฟััะบะฐ ะฟัะธะผะตะฝัะตั ะพะฑะฝะพะฒะปะตะฝะฝัะต ะทะฐะฟัะพัั ัะตััััะพะฒ ะบ ะฝะพะฒะพะผั Pod.

**ะัะฟะพะปัะทะพะฒะฐะฝะธะต:**
- ะะบัะธะฒะฝะพะต ัะฟัะฐะฒะปะตะฝะธะต ัะตััััะฐะผะธ ัะฐะฑะพัะฐััะธั Pod
- ะะฟัะธะผะธะทะฐัะธั ะธัะฟะพะปัะทะพะฒะฐะฝะธั ัะตััััะพะฒ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
- ะะฒัะพะผะฐัะธัะตัะบะฐั ะบะพััะตะบัะธัะพะฒะบะฐ ะฟัะธ ะธะทะผะตะฝะตะฝะธะธ ะฝะฐะณััะทะบะธ

**ะะฐะถะฝะพ:** ะััะตัะฝะตะฝะธะต Pod ะผะพะถะตั ะฟัะธะฒะตััะธ ะบ ะบัะฐัะบะพะฒัะตะผะตะฝะฝะพะน ะฝะตะดะพัััะฟะฝะพััะธ, ะฟะพััะพะผั ะฒะฐะถะฝะพ ััะธััะฒะฐัั PodDisruptionBudgets.

### InPlaceOrRecreate (ะะฐ ะผะตััะต ะธะปะธ ะฟะตัะตัะพะทะดะฐะฝะธะต)

ะ ัะตะถะธะผะต InPlaceOrRecreate VPA ะฟััะฐะตััั ะพะฑะฝะพะฒะธัั ะทะฐะฟัะพัั ัะตััััะพะฒ ะธ ะปะธะผะธัั Pod ะฑะตะท ะฟะตัะตะทะฐะฟััะบะฐ Pod, ะบะพะณะดะฐ ััะพ ะฒะพะทะผะพะถะฝะพ. ะะดะฝะฐะบะพ, ะตัะปะธ ะพะฑะฝะพะฒะปะตะฝะธั ะฝะฐ ะผะตััะต ะฝะต ะผะพะณัั ะฑััั ะฒัะฟะพะปะฝะตะฝั ะดะปั ะบะพะฝะบัะตัะฝะพะณะพ ะธะทะผะตะฝะตะฝะธั ัะตััััะพะฒ, VPA ะฒะพะทะฒัะฐัะฐะตััั ะบ ะฒััะตัะฝะตะฝะธั Pod (ะฐะฝะฐะปะพะณะธัะฝะพ ัะตะถะธะผั Recreate) ะธ ะฟะพะทะฒะพะปัะตั ะบะพะฝััะพะปะปะตัั ัะฐะฑะพัะตะน ะฝะฐะณััะทะบะธ ัะพะทะดะฐัั ะทะฐะผะตะฝัััะธะน Pod ั ะพะฑะฝะพะฒะปะตะฝะฝัะผะธ ัะตััััะฐะผะธ.

ะ ััะพะผ ัะตะถะธะผะต updater ะฟัะธะผะตะฝัะตั ัะตะบะพะผะตะฝะดะฐัะธะธ ะฝะฐ ะผะตััะต, ะธัะฟะพะปัะทัั ััะฝะบัะธั Resize Container Resources In-Place.

**ะัะฟะพะปัะทะพะฒะฐะฝะธะต:**
- ะะธะฝะธะผะธะทะฐัะธั ะฟะตัะตะทะฐะฟััะบะพะฒ Pod
- ะะฑะฝะพะฒะปะตะฝะธะต ัะตััััะพะฒ ะฑะตะท ะฟัะตััะฒะฐะฝะธั ัะฐะฑะพัั
- ะะฒัะพะผะฐัะธัะตัะบะธะน ะพัะบะฐั ะบ ะฟะตัะตัะพะทะดะฐะฝะธั ะฟัะธ ะฝะตะพะฑัะพะดะธะผะพััะธ

### Auto (ะฃััะฐัะตะฒัะธะน)

> **ะัะธะผะตัะฐะฝะธะต:** ะะตะถะธะผ Auto ัััะฐัะตะป ั ะฒะตััะธะธ VPA 1.4.0. ะัะฟะพะปัะทัะนัะต Recreate ะดะปั ะพะฑะฝะพะฒะปะตะฝะธะน ะฝะฐ ะพัะฝะพะฒะต ะฒััะตัะฝะตะฝะธั ะธะปะธ InPlaceOrRecreate ะดะปั ะพะฑะฝะพะฒะปะตะฝะธะน ะฝะฐ ะผะตััะต ั ะพัะบะฐัะพะผ ะบ ะฒััะตัะฝะตะฝะธั.

ะะตะถะธะผ Auto ะฒ ะฝะฐััะพััะตะต ะฒัะตะผั ัะฒะปัะตััั ะฐะปะธะฐัะพะผ ะดะปั ัะตะถะธะผะฐ Recreate ะธ ะฒะตะดะตั ัะตะฑั ะธะดะตะฝัะธัะฝะพ. ะะฝ ะฑัะป ะฒะฒะตะดะตะฝ ะดะปั ะพะฑะตัะฟะตัะตะฝะธั ะฑัะดััะตะณะพ ัะฐััะธัะตะฝะธั ัััะฐัะตะณะธะน ะฐะฒัะพะผะฐัะธัะตัะบะพะณะพ ะพะฑะฝะพะฒะปะตะฝะธั.

---

</details>

<details>
<summary><b>๐ะะพะปะธัะธะบะธ ัะตััััะพะฒ (Resource Policies)</b></summary>

---

## Resource Policies

ะะพะปะธัะธะบะธ ัะตััััะพะฒ ะฟะพะทะฒะพะปััั ัะพัะฝะพ ะฝะฐัััะพะธัั, ะบะฐะบ VerticalPodAutoscaler ะณะตะฝะตัะธััะตั ัะตะบะพะผะตะฝะดะฐัะธะธ ะธ ะฟัะธะผะตะฝัะตั ะพะฑะฝะพะฒะปะตะฝะธั. ะะพะถะฝะพ ัััะฐะฝะพะฒะธัั ะณัะฐะฝะธัั ะดะปั ัะตะบะพะผะตะฝะดะฐัะธะน ะฟะพ ัะตััััะฐะผ, ัะบะฐะทะฐัั, ะบะฐะบะธะต ัะตััััั ัะฟัะฐะฒะปััั, ะธ ะฝะฐัััะพะธัั ัะฐะทะปะธัะฝัะต ะฟะพะปะธัะธะบะธ ะดะปั ะพัะดะตะปัะฝัั ะบะพะฝัะตะนะฝะตัะพะฒ ะฒ Pod.

ะะพะปะธัะธะบะธ ัะตััััะพะฒ ะพะฟัะตะดะตะปััััั ะฒ ะฟะพะปะต `resourcePolicy` ัะฟะตัะธัะธะบะฐัะธะธ VPA:

```yaml
apiVersion: autoscaling.k8s.io/v1
kind: VerticalPodAutoscaler
metadata:
  name: my-app-vpa
spec:
  targetRef:
    apiVersion: "apps/v1"
    kind: Deployment
    name: my-app
  updatePolicy:
    updateMode: "Recreate"
  resourcePolicy:
    containerPolicies:
    - containerName: "application"
      minAllowed:
        cpu: 100m
        memory: 128Mi
      maxAllowed:
        cpu: 2
        memory: 2Gi
      controlledResources:
      - cpu
      - memory
      controlledValues: RequestsAndLimits
```

### minAllowed ะธ maxAllowed

ะญัะธ ะฟะพะปั ัััะฐะฝะฐะฒะปะธะฒะฐัั ะณัะฐะฝะธัั ะดะปั ัะตะบะพะผะตะฝะดะฐัะธะน VPA. VPA ะฝะธะบะพะณะดะฐ ะฝะต ะฑัะดะตั ัะตะบะพะผะตะฝะดะพะฒะฐัั ัะตััััั ะฝะธะถะต `minAllowed` ะธะปะธ ะฒััะต `maxAllowed`, ะดะฐะถะต ะตัะปะธ ัะฐะบัะธัะตัะบะธะต ะดะฐะฝะฝัะต ะพะฑ ะธัะฟะพะปัะทะพะฒะฐะฝะธะธ ะฟัะตะดะฟะพะปะฐะณะฐัั ะดััะณะธะต ะทะฝะฐัะตะฝะธั.

**ะัะธะผะตั:**

```yaml
resourcePolicy:
  containerPolicies:
  - containerName: "app"
    minAllowed:
      cpu: 200m
      memory: 256Mi
    maxAllowed:
      cpu: 4
      memory: 8Gi
```

### controlledResources

ะะพะปะต `controlledResources` ัะบะฐะทัะฒะฐะตั, ะบะฐะบะธะต ัะธะฟั ัะตััััะพะฒ VPA ะดะพะปะถะตะฝ ัะฟัะฐะฒะปััั ะดะปั ะบะพะฝัะตะนะฝะตัะฐ ะฒ Pod. ะัะปะธ ะฝะต ัะบะฐะทะฐะฝะพ, VPA ัะฟัะฐะฒะปัะตั ะบะฐะบ CPU, ัะฐะบ ะธ ะฟะฐะผัััั ะฟะพ ัะผะพะปัะฐะฝะธั. ะะพะถะฝะพ ะพะณัะฐะฝะธัะธัั VPA ัะฟัะฐะฒะปะตะฝะธะตะผ ัะพะปัะบะพ ะพะฟัะตะดะตะปะตะฝะฝัะผะธ ัะตััััะฐะผะธ. ะะพะฟัััะธะผัะต ะธะผะตะฝะฐ ัะตััััะพะฒ ะฒะบะปััะฐัั `cpu` ะธ `memory`.

**ะัะธะผะตัั:**

```yaml
# ะฃะฟัะฐะฒะปะตะฝะธะต ัะพะปัะบะพ CPU
controlledResources:
- cpu

# ะฃะฟัะฐะฒะปะตะฝะธะต ัะพะปัะบะพ ะฟะฐะผัััั
controlledResources:
- memory

# ะฃะฟัะฐะฒะปะตะฝะธะต CPU ะธ ะฟะฐะผัััั (ะฟะพ ัะผะพะปัะฐะฝะธั)
controlledResources:
- cpu
- memory
```

### controlledValues

ะะพะปะต `controlledValues` ะพะฟัะตะดะตะปัะตั, ะบะพะฝััะพะปะธััะตั ะปะธ VPA ะทะฐะฟัะพัั ัะตััััะพะฒ, ะปะธะผะธัั ะธะปะธ ะพะฑะฐ:

#### RequestsAndLimits

VPA ัััะฐะฝะฐะฒะปะธะฒะฐะตั ะบะฐะบ ะทะฐะฟัะพัั, ัะฐะบ ะธ ะปะธะผะธัั. ะะธะผะธั ะผะฐัััะฐะฑะธััะตััั ะฟัะพะฟะพััะธะพะฝะฐะปัะฝะพ ะทะฐะฟัะพัั ะฝะฐ ะพัะฝะพะฒะต ัะพะพัะฝะพัะตะฝะธั ะทะฐะฟัะพั-ะบ-ะปะธะผะธัั, ะพะฟัะตะดะตะปะตะฝะฝะพะณะพ ะฒ ัะฟะตัะธัะธะบะฐัะธะธ Pod. ะญัะพ ัะตะถะธะผ ะฟะพ ัะผะพะปัะฐะฝะธั.

**ะัะธะผะตั:**

```yaml
controlledValues: RequestsAndLimits
```

ะัะปะธ ะฒ Pod ะพะฟัะตะดะตะปะตะฝะพ:
```yaml
resources:
  requests:
    cpu: 100m
    memory: 128Mi
  limits:
    cpu: 200m
    memory: 256Mi
```

VPA ะฑัะดะตั ะฟะพะดะดะตัะถะธะฒะฐัั ัะพะพัะฝะพัะตะฝะธะต 1:2 ะดะปั CPU ะธ ะฟะฐะผััะธ.

#### RequestsOnly

VPA ัััะฐะฝะฐะฒะปะธะฒะฐะตั ัะพะปัะบะพ ะทะฐะฟัะพัั, ะพััะฐะฒะปัั ะปะธะผะธัั ะฑะตะท ะธะทะผะตะฝะตะฝะธะน. ะะธะผะธัั ัะพะฑะปัะดะฐัััั ะธ ะฒัะต ะตัะต ะผะพะณัั ะฒัะทัะฒะฐัั ััะพััะปะธะฝะณ ะธะปะธ ัะฑะธะนััะฒะพ ะธะท-ะทะฐ ะฝะตัะฒะฐัะบะธ ะฟะฐะผััะธ, ะตัะปะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะฟัะตะฒััะฐะตั ะธั.

**ะัะธะผะตั:**

```yaml
controlledValues: RequestsOnly
```

### LimitRange ัะตััััั

ะะพะผะฟะพะฝะตะฝัั ะบะพะฝััะพะปะปะตัะฐ ะดะพะฟััะบะฐ ะธ updater VPA ะฟะพััะพะฑัะฐะฑะฐััะฒะฐัั ัะตะบะพะผะตะฝะดะฐัะธะธ ะดะปั ัะพะพัะฒะตัััะฒะธั ะพะณัะฐะฝะธัะตะฝะธัะผ, ะพะฟัะตะดะตะปะตะฝะฝัะผ ะฒ LimitRanges. ะัะพะฒะตัััััั ัะตััััั LimitRange ั ัะธะฟะพะผ Pod ะธ Container ะฒ ะบะปะฐััะตัะต Kubernetes.

**ะัะธะผะตั:**

ะัะปะธ ะฟะพะปะต `max` ะฒ ัะตััััะต Container LimitRange ะฟัะตะฒััะตะฝะพ, ะพะฑะฐ ะบะพะผะฟะพะฝะตะฝัะฐ VPA ัะฝะธะถะฐัั ะปะธะผะธั ะดะพ ะทะฝะฐัะตะฝะธั, ะพะฟัะตะดะตะปะตะฝะฝะพะณะพ ะฒ ะฟะพะปะต `max`, ะธ ะทะฐะฟัะพั ะฟัะพะฟะพััะธะพะฝะฐะปัะฝะพ ัะผะตะฝััะฐะตััั ะดะปั ะฟะพะดะดะตัะถะฐะฝะธั ัะพะพัะฝะพัะตะฝะธั ะทะฐะฟัะพั-ะบ-ะปะธะผะธัั ะฒ ัะฟะตัะธัะธะบะฐัะธะธ Pod.

```yaml
apiVersion: v1
kind: LimitRange
metadata:
  name: mem-limit-range
spec:
  limits:
  - default:
      memory: 512Mi
    defaultRequest:
      memory: 256Mi
    max:
      memory: 1Gi
    type: Container
```

---

</details>

<details>
<summary><b>๐ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั VPA</b></summary>

---

## ะะฐะทะพะฒัะน ะฟัะธะผะตั

### ะกะพะทะดะฐะฝะธะต VerticalPodAutoscaler

```yaml
apiVersion: autoscaling.k8s.io/v1
kind: VerticalPodAutoscaler
metadata:
  name: my-app-vpa
spec:
  targetRef:
    apiVersion: "apps/v1"
    kind: Deployment
    name: my-app
  updatePolicy:
    updateMode: "Recreate"
```

### ะัะธะผะตั ั ะฟะพะปะธัะธะบะฐะผะธ ัะตััััะพะฒ

```yaml
apiVersion: autoscaling.k8s.io/v1
kind: VerticalPodAutoscaler
metadata:
  name: my-app-vpa
spec:
  targetRef:
    apiVersion: "apps/v1"
    kind: Deployment
    name: my-app
  updatePolicy:
    updateMode: "InPlaceOrRecreate"
  resourcePolicy:
    containerPolicies:
    - containerName: "application"
      minAllowed:
        cpu: 100m
        memory: 128Mi
      maxAllowed:
        cpu: 2
        memory: 2Gi
      controlledResources:
      - cpu
      - memory
      controlledValues: RequestsAndLimits
    - containerName: "sidecar"
      minAllowed:
        cpu: 50m
        memory: 64Mi
      maxAllowed:
        cpu: 500m
        memory: 512Mi
      controlledResources:
      - memory
      controlledValues: RequestsOnly
```

### ะัะพัะผะพัั ัะตะบะพะผะตะฝะดะฐัะธะน

```bash
# ะัะพัะผะพัั VPA
kubectl get vpa my-app-vpa

# ะะตัะฐะปัะฝะฐั ะธะฝัะพัะผะฐัะธั ั ัะตะบะพะผะตะฝะดะฐัะธัะผะธ
kubectl describe vpa my-app-vpa

# YAML ั ัะตะบะพะผะตะฝะดะฐัะธัะผะธ ะฒ .status
kubectl get vpa my-app-vpa -o yaml
```

### ะัะธะผะตั ะฒัะฒะพะดะฐ ัะตะบะพะผะตะฝะดะฐัะธะน

```yaml
status:
  recommendation:
    containerRecommendations:
    - containerName: application
      lowerBound:
        cpu: 100m
        memory: 128Mi
      target:
        cpu: 250m
        memory: 256Mi
      upperBound:
        cpu: 500m
        memory: 512Mi
      uncappedTarget:
        cpu: 200m
        memory: 200Mi
```

---

</details>

---

## ะกะฒัะทะฐะฝะฝัะต ัะตะผั

- **[K-09-1-Rolling-Updates-and-Rollbacks](K-09-1-Rolling-Updates-and-Rollbacks.md)** โ ะพะฑะฝะพะฒะปะตะฝะธั ะธ ะพัะบะฐัั
- **[K-09-2-Command-and-Arguments-Docker](K-09-2-Command-and-Arguments-Docker.md)** โ ะบะพะผะฐะฝะดั ะธ ะฐัะณัะผะตะฝัั ะฒ Docker ะบะพะฝัะตะนะฝะตัะฐั
- **[K-09-3-Command-and-Arguments-k8s](K-09-3-Command-and-Arguments-k8s.md)** โ ะบะพะผะฐะฝะดั ะธ ะฐัะณัะผะตะฝัั ะฒ Kubernetes Pod
- **[K-09-4-Environment-Variables-in-Applications](K-09-4-Environment-Variables-in-Applications.md)** โ ะฟะตัะตะผะตะฝะฝัะต ััะตะดั ะฒ ะฟัะธะปะพะถะตะฝะธัั
- **[K-09-5-Configure-ConfigMaps-in-Applications](K-09-5-Configure-ConfigMaps-in-Applications.md)** โ ะฝะฐัััะพะนะบะฐ ConfigMaps ะฒ ะฟัะธะปะพะถะตะฝะธัั
- **[K-09-6-Configure-Secrets-in-Applications](K-09-6-Configure-Secrets-in-Applications.md)** โ ะฝะฐัััะพะนะบะฐ Secrets ะฒ ะฟัะธะปะพะถะตะฝะธัั
- **[K-09-7-Multi-Container-PODs](K-09-7-Multi-Container-PODs.md)** โ ะผัะปััะธะบะพะฝัะตะนะฝะตัะฝัะต Pod
- **[K-09-8-Init-Containers](K-09-8-Init-Containers.md)** โ Init ะบะพะฝัะตะนะฝะตัั
- **[K-09-9-Self-Healing-Apps](K-09-9-Self-Healing-Apps.md)** โ ัะฐะผะพะฒะพัััะฐะฝะฐะฒะปะธะฒะฐััะธะตัั ะฟัะธะปะพะถะตะฝะธั
- **[K-09-10-Autoscaling-Benefits](K-09-10-Autoscaling-Benefits.md)** โ ะฟัะตะธะผััะตััะฒะฐ ะฐะฒัะพะผะฐัะธัะตัะบะพะณะพ ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธั
- **[K-09-11-HPA-Architecture](K-09-11-HPA-Architecture.md)** โ ะฐััะธัะตะบัััะฐ Horizontal Pod Autoscaler
- **[K-09-12-VPA-Architecture](K-09-12-VPA-Architecture.md)** โ ะฐััะธัะตะบัััะฐ Vertical Pod Autoscaler **โ ะขะตะบััะฐั ัะตะผะฐ**
- **[K-09-13-Pod-In-Place-Resize](K-09-13-Pod-In-Place-Resize.md)** โ ะธะทะผะตะฝะตะฝะธะต ัะฐะทะผะตัะฐ Pod ะฝะฐ ะผะตััะต

---

## ะงัะพ ะดะฐะปััะต?

ะ ัะปะตะดัััะตะน ัะตะผะต [K-09-13-Pod-In-Place-Resize](K-09-13-Pod-In-Place-Resize.md) ะผั ัะฐััะผะพััะธะผ ััะฝะบัะธั In-Place Pod Resize, ะบะพัะพัะฐั ะฟะพะทะฒะพะปัะตั ะธะทะผะตะฝััั ัะตััััั CPU ะธ ะฟะฐะผััะธ ะบะพะฝัะตะนะฝะตัะพะฒ ะฑะตะท ะฟะตัะตัะพะทะดะฐะฝะธั Pod, ััะพ ะพัะพะฑะตะฝะฝะพ ะฟะพะปะตะทะฝะพ ะฒ ัะพัะตัะฐะฝะธะธ ั Vertical Pod Autoscaler ะดะปั ะฐะฒัะพะผะฐัะธัะตัะบะพะน ะพะฟัะธะผะธะทะฐัะธะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธั ัะตััััะพะฒ.

---
