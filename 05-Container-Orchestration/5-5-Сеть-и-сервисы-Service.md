# üåê5-5-–°–µ—Ç—å-–∏-—Å–µ—Ä–≤–∏—Å—ã-Services

<details>
<summary><b>üéØ–ß—Ç–æ —Ç–∞–∫–æ–µ Service?</b></summary>

---

### –ü—Ä–æ–±–ª–µ–º–∞ "—Å–º–µ—Ä—Ç–Ω–æ—Å—Ç–∏" Pod'–æ–≤

Pods –≤ Kubernetes **—ç—Ñ–µ–º–µ—Ä–Ω—ã** - –æ–Ω–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è, –Ω–æ –∫–æ–≥–¥–∞ Pod —É–º–∏—Ä–∞–µ—Ç, –æ–Ω –Ω–µ –≤–æ—Å–∫—Ä–µ—Å–∞–µ—Ç. –ö–∞–∂–¥—ã–π Pod –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–π IP-–∞–¥—Ä–µ—Å, –Ω–æ —ç—Ç–æ—Ç –∞–¥—Ä–µ—Å **–Ω–µ –ø–æ—Å—Ç–æ—è–Ω–µ–Ω** –∏ **–Ω–µ —Å—Ç–∞–±–∏–ª–µ–Ω**.

**–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–±–ª–µ–º—ã:**
- ReplicaSet –º–æ–∂–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ Pod'–æ–≤
- –ù–æ–≤—ã–µ Pod'—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –Ω–∞ –¥—Ä—É–≥–∏—Ö –Ω–æ–¥–∞—Ö ‚Üí IP –º–µ–Ω—è–µ—Ç—Å—è
- –ö–∞–∫ frontend Pod'–∞–º –Ω–∞–π—Ç–∏ backend Pod'—ã?

### –†–µ—à–µ–Ω–∏–µ: Service

Service - —ç—Ç–æ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:
- **–õ–æ–≥–∏—á–µ—Å–∫–∏–π –Ω–∞–±–æ—Ä Pod'–æ–≤** (–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å)
- **–ü–æ–ª–∏—Ç–∏–∫—É –¥–æ—Å—Ç—É–ø–∞** –∫ –Ω–∏–º
- **–°—Ç–∞–±–∏–ª—å–Ω—É—é —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø–∞**

**–ü—Ä–∏–º–µ—Ä:** 3 backend Pod'–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- Frontend –Ω–µ –¥–æ–ª–∂–µ–Ω –±–µ—Å–ø–æ–∫–æ–∏—Ç—å—Å—è –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º backend Pod'–µ
- Service –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É –Ω–∞–≥—Ä—É–∑–∫–∏

---

</details>

<details>
<summary><b>üìã–ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä Service</b></summary>

---

```yaml
kind: Service
apiVersion: v1
metadata:
  name: my-service
spec:
  selector:
    app: MyApp
  ports:
  - protocol: TCP
    port: 80
    targetPort: 9376
```

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–°–æ–∑–¥–∞–µ—Ç—Å—è Service** `my-service`
2. **–°–µ–ª–µ–∫—Ç–æ—Ä** `app: MyApp` –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ Pod'—ã —Å —ç—Ç–æ–π –º–µ—Ç–∫–æ–π
3. **–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** –ø–æ—Ä—Ç–∞ 80 ‚Üí –ø–æ—Ä—Ç 9376 –Ω–∞ Pod'–∞—Ö
4. **Service –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–π IP-–∞–¥—Ä–µ—Å**

### –ú–µ—Ö–∞–Ω–∏–∑–º Endpoints

Kubernetes –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –æ–±—ä–µ–∫—Ç **Endpoints**:
- –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç Pod'—ã –ø–æ —Å–µ–ª–µ–∫—Ç–æ—Ä—É
- –ü—É–±–ª–∏–∫—É–µ—Ç —Å–ø–∏—Å–æ–∫ IP-–∞–¥—Ä–µ—Å–æ–≤ Pod'–æ–≤ –≤ Endpoints
- Service –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–∏ Endpoints –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏

---

</details>

<details>
<summary><b>üîß–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ—Ä—Ç–æ–≤</b></summary>

---

### –í–∞—Ä–∏–∞–Ω—Ç—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ—Ä—Ç–æ–≤:

#### –ë–∞–∑–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç:
```yaml
ports:
- protocol: TCP
  port: 80        # –ü–æ—Ä—Ç Service
  targetPort: 9376 # –ü–æ—Ä—Ç Pod'–∞
```

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–º–µ–Ω –ø–æ—Ä—Ç–æ–≤:
```yaml
ports:
- name: http
  protocol: TCP
  port: 80
  targetPort: web-api  # –ò–º—è –ø–æ—Ä—Ç–∞ –≤ Pod
```

–í Pod'–µ:
```yaml
ports:
- name: web-api
  containerPort: 9376
```

#### –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ—Ä—Ç—ã:
```yaml
ports:
- name: http
  protocol: TCP
  port: 80
  targetPort: 9376
- name: https
  protocol: TCP
  port: 443
  targetPort: 9377
```

</details>

<details>
<summary><b>üåê–¢–∏–ø—ã Service (ServiceTypes)</b></summary>

---

### ClusterIP (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```yaml
spec:
  type: ClusterIP
  # –∏–ª–∏ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```
- **–î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞**
- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP-–∞–¥—Ä–µ—Å –∫–ª–∞—Å—Ç–µ—Ä–∞
- –ò–¥–µ–∞–ª–µ–Ω –¥–ª—è —Å–≤—è–∑–∏ –º–µ–∂–¥—É –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏

### NodePort
```yaml
spec:
  type: NodePort
  ports:
  - port: 80
    targetPort: 9376
    nodePort: 30080  # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
```
- **–î–æ—Å—Ç—É–ø —Å–Ω–∞—Ä—É–∂–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞**
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç –Ω–∞ –∫–∞–∂–¥–æ–π –Ω–æ–¥–µ (30000-32767)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç ClusterIP
- URL: `<NodeIP>:<NodePort>`

### LoadBalancer
```yaml
spec:
  type: LoadBalancer
```
- **–û–±–ª–∞—á–Ω—ã–π –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–≥—Ä—É–∑–∫–∏**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç NodePort + ClusterIP
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ–±–ª–∞—á–Ω—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ (AWS, GCP, Azure)

### ExternalName
```yaml
spec:
  type: ExternalName
  externalName: foo.bar.example.com
```
- **CNAME –∑–∞–ø–∏—Å—å –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞**
- –ë–µ–∑ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è
- –î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

---

</details>

<details>
<summary><b>üîóService –±–µ–∑ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞</b></summary>

---

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

- –í–Ω–µ—à–Ω–∏–π –∫–ª–∞—Å—Ç–µ—Ä –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
- –°–µ—Ä–≤–∏—Å –≤ –¥—Ä—É–≥–æ–º namespace –∏–ª–∏ –∫–ª–∞—Å—Ç–µ—Ä–µ
- –°–∏—Å—Ç–µ–º—ã –≤–Ω–µ Kubernetes (–º–∏–≥—Ä–∞—Ü–∏—è)

### –ü—Ä–∏–º–µ—Ä Service –±–µ–∑ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞:
```yaml
kind: Service
apiVersion: v1
metadata:
  name: my-service
spec:
  ports:
  - protocol: TCP
    port: 80
    targetPort: 9376
```

### –†—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ Endpoints:
```yaml
kind: Endpoints
apiVersion: v1
metadata:
  name: my-service  # –î–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å Service
subsets:
  - addresses:
      - ip: 1.2.3.4  # –í–Ω–µ—à–Ω–∏–π IP
    ports:
      - port: 9376
```

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:** IP –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–∞—Ö:
- 127.0.0.0/8
- 169.254.0.0/16  
- 224.0.0.0/24

---

</details>

<details>
<summary><b>üõ†Ô∏è–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞</b></summary>

---

### –°–æ–∑–¥–∞–Ω–∏–µ Service:

```bash
kubectl apply -f service.yaml
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä Service:

```bash
kubectl get services
kubectl describe service my-service
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä Endpoints:

```bash
kubectl get endpoints
kubectl describe endpoints my-service
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞:

```bash
# –ò–∑–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞
kubectl run test-pod --image=busybox --rm -it -- sh
# –í–Ω—É—Ç—Ä–∏ Pod'–∞:
wget -O- http://my-service:80
```

### –î–ª—è NodePort:

```bash
# –ü–æ–ª—É—á–∏—Ç—å NodePort
kubectl get service my-service

# –î–æ—Å—Ç—É–ø —Å–Ω–∞—Ä—É–∂–∏
curl http://<node-ip>:<node-port>
```

---

</details>

<details>
<summary><b>üí°–ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</b></summary>

---

## 1. –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
```mermaid
graph TD
    A[Frontend Pod] --> B[Frontend Service]
    B --> C[Backend Pod 1]
    B --> D[Backend Pod 2]
    B --> E[Backend Pod 3]
```
- **ClusterIP** –¥–ª—è —Å–≤—è–∑–∏ –º–µ–∂–¥—É –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏
- –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ –º–µ–∂–¥—É —Ä–µ–ø–ª–∏–∫–∞–º–∏

## 2. –í–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
```mermaid
graph LR
    A[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å] --> B[NodePort/LoadBalancer]
    B --> C[App Pod 1]
    B --> D[App Pod 2]
```
- **NodePort** –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏/—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **LoadBalancer** –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –≤ –æ–±–ª–∞–∫–µ

## 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
```mermaid
graph LR
    A[App Pod] --> B[ExternalName Service]
    B --> C[–í–Ω–µ—à–Ω—è—è –ë–î]
```
- **ExternalName** –¥–ª—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
- **Service –±–µ–∑ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞** –¥–ª—è –≥–∏–±—Ä–∏–¥–Ω—ã—Ö —Å—Ä–µ–¥

---

</details>

</details><details> <summary><b>üéØ–ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã</b></summary>

---

1. **Service —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É "—Å–º–µ—Ä—Ç–Ω–æ—Å—Ç–∏" Pod'–æ–≤** - –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–π endpoint

2. **–°–µ–ª–µ–∫—Ç–æ—Ä—ã –º–µ—Ç–æ–∫** - –æ—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ö–∞–Ω–∏–∑–º —Å–≤—è–∑—ã–≤–∞–Ω–∏—è Service —Å Pod'–∞–º–∏

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ Endpoints** - Kubernetes —Å–∞–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è Pod'–æ–≤

4. **Multiple ServiceTypes** - —Ä–∞–∑–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–æ—Å—Ç—É–ø–∞ (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π/–≤–Ω–µ—à–Ω–∏–π)

5. **–ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä—Ç–æ–≤** - –∏–º–µ–Ω–∞ –ø–æ—Ä—Ç–æ–≤, –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ—Ä—Ç—ã

6. **–í–Ω–µ—à–Ω–∏–µ –±—ç–∫–µ–Ω–¥—ã** - —á–µ—Ä–µ–∑ Service –±–µ–∑ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ + —Ä—É—á–Ω—ã–µ Endpoints

>üí°**–°–æ–≤–µ—Ç:** –ù–∞—á–∏–Ω–∞–π—Ç–µ —Å ClusterIP –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ NodePort –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –Ω–∞ LoadBalancer –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞.