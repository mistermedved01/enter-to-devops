[üè† –ì–ª–∞–≤–Ω–∞—è](../../README.md) ‚Üí [‚ò∏Ô∏è Container-Orchestration](../../README.md#-container-orchestration) ‚Üí [üéõÔ∏è K-02-Master-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](../../README.md#-k-02-master-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)

---

# üéõÔ∏èK-02-1-Master-Component-ETCD
>etcd - —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∫–ª–∞—Å—Ç–µ—Ä–∞ Kubernetes –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤

---

<details>
<summary><b>üéØ–ß—Ç–æ —Ç–∞–∫–æ–µ ETCD?</b></summary>

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è

**ETCD** - —ç—Ç–æ –Ω–∞–¥–µ–∂–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ç–∏–ø–∞ "–∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ", –∫–æ—Ç–æ—Ä–æ–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏–∑—É–µ—Ç—Å—è:
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π API
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ TLS
- ‚úÖ **–°–∫–æ—Ä–æ—Å—Ç—å** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç—å** - –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

## –•—Ä–∞–Ω–∏–ª–∏—â–µ –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ vs –†–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–µ –ë–î

### –†–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–µ –ë–î (SQL)
```
–¢–∞–±–ª–∏—Ü–∞: users
id  | name  | age
----|-------|----
1   | Alice | 25
2   | Bob   | 30
```

### NoSQL (–∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ)
```
user:1 ‚Üí {"name": "Alice", "age": 25}
user:2 ‚Üí {"name": "Bob", "age": 30}
config:app ‚Üí {"version": "1.0", "debug": true}
```

**–ö–ª—é—á–µ–≤—ã–µ —Ä–∞–∑–ª–∏—á–∏—è:**
- **NoSQL** - –ø—Ä–æ—Å—Ç–æ–π –¥–æ—Å—Ç—É–ø –ø–æ –∫–ª—é—á—É, –Ω–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∫–ª—é—á–µ–π
- **SQL** - —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã, —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏
- **NoSQL** –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –∏ –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

---

</details>

<details>
<summary><b>üõ†Ô∏è–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ ETCD</b></summary>

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Å GitHub**
```
# –î–ª—è Linux
wget https://github.com/etcd-io/etcd/releases/download/v3.5.0/etcd-v3.5.0-linux-amd64.tar.gz
tar -xvf etcd-v3.5.0-linux-amd64.tar.gz
cd etcd-v3.5.0-linux-amd64
```

2. **–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞**
```
./etcd
# –°–µ—Ä–≤–∏—Å –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 2379
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ etcd —Å–ª—É—à–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 2379
netstat -tulpn | grep 2379

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—è ss
ss -tulpn | grep 2379
```

---

</details>

<details>
<summary><b>üîß–†–∞–±–æ—Ç–∞ —Å etcdctl</b></summary>

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ó–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö
```
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä—É –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ
etcdctl put key1 "value1"
etcdctl put app/config '{"debug": true, "port": 8080}'
```

### –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
```
# –ü–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –∫–ª—é—á—É
etcdctl get key1

# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–ª—é—á–∏
etcdctl get --prefix ""

# –ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º
etcdctl get --prefix "app/"
```

### –£–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
```
# –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á
etcdctl del key1

# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∫–ª—é—á–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º
etcdctl del --prefix "app/"
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```
# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
etcdctl --help

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –∫–ª–∞—Å—Ç–µ—Ä–∞
etcdctl endpoint health

# –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ—Ç—Ä–∏–∫
etcdctl endpoint status
```

---

</details>

<details>
<summary><b>üîÆ–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ–º—ã (–±—É–¥—É—Ç –ø–æ–∑–∂–µ)</b></summary>

---

## –ß—Ç–æ –±—É–¥–µ—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–æ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —á–∞—Å—Ç—è—Ö:

### –í—ã—Å–æ–∫–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ETCD
- –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ü—Ä–æ—Ç–æ–∫–æ–ª RAFT –¥–ª—è –∫–æ–Ω—Å–µ–Ω—Å—É—Å–∞

### –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è
- "Split-brain" (—Ä–∞–∑–¥–≤–æ–µ–Ω–∏–µ –ª–∏—á–Ω–æ—Å—Ç–∏) –∫–ª–∞—Å—Ç–µ—Ä–æ–≤
- Best practices –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —É–∑–ª–æ–≤
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–±–æ–µ–≤

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ TLS
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- RBAC –¥–ª—è ETCD

---

</details>

<details>
<summary><b>üéØETCD –≤ Kubernetes</b></summary>

---

## –†–æ–ª—å ETCD –≤ Kubernetes

ETCD –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ **–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã** –¥–ª—è Kubernetes:

- –•—Ä–∞–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ (Pods, Services, Deployments)
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∫–ª–∞—Å—Ç–µ—Ä–∞
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

## –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –≤ Kubernetes

```
/registry/pods/default/my-pod ‚Üí { Pod manifest }
/registry/services/default/frontend ‚Üí { Service manifest }
/registry/configmaps/default/app-config ‚Üí { ConfigMap data }
```

> üí° **–í–∞–∂–Ω–æ:** –ë–µ–∑ ETCD Kubernetes –Ω–µ –º–æ–∂–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å - —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–ª–∞—Å—Ç–µ—Ä–∞.

---

</details>

<details>
<summary><b>üí°–ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã</b></summary>

---

1. **üìå ETCD** - —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ
2. **üìå –ü—Ä–æ—Å—Ç–æ—Ç–∞** - –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π API –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
3. **üìå –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
4. **üìå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç** Kubernetes
5. **üìå –õ–µ–≥–∫–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** - –ø—Ä–æ—Å—Ç—ã–µ –∫–æ–º–∞–Ω–¥—ã etcdctl

> üöÄ **–î–∞–ª—å—à–µ:** –í —Å–ª–µ–¥—É—é—â–∏—Ö —á–∞—Å—Ç—è—Ö —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –≤—ã—Å–æ–∫—É—é –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å ETCD –∏ –ø—Ä–æ—Ç–æ–∫–æ–ª RAFT.

</details>

---