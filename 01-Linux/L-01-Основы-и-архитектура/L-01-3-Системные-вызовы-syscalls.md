[üè† –ì–ª–∞–≤–Ω–∞—è](../../README.md) ‚Üí [üêß Linux](../../README.md#-linux) ‚Üí [üèóÔ∏è L-01-–û—Å–Ω–æ–≤—ã-–∏-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](../../README.md#-l-01-–æ—Å–Ω–æ–≤—ã-–∏-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)

---

# üèóÔ∏èL-01-3-–°–∏—Å—Ç–µ–º–Ω—ã–µ-–≤—ã–∑–æ–≤—ã-syscalls

## –ß—Ç–æ —Ç–∞–∫–æ–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã:

- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏ –∏ —è–¥—Ä–æ–º –û–°

- –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –ª–µ–≥–∞–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ—Å—É—Ä—Å–∞–º —è–¥—Ä–∞

- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è

## –ú–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–±–æ—Ç—ã:

1. –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø–æ–º–µ—â–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ —Ä–µ–≥–∏—Å—Ç—Ä—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞

2. –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è syscall/sysenter

3. –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ä–µ–∂–∏–º —è–¥—Ä–∞

4. –Ø–¥—Ä–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é

5. –†–µ–∑—É–ª—å—Ç–∞—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä—ã

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤:

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏:**

```Shell
pid = fork();          // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
execve(path, argv, envp); // –ó–∞–º–µ–Ω–∞ –æ–±—Ä–∞–∑–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
exit(status);          // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞
waitpid(pid, &status, options); // –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–æ—Ç–æ–º–∫–∞
```

**–†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏:**

```Shell
fd = open(pathname, flags, mode); // –û—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–∞
n = read(fd, buffer, count);     // –ß—Ç–µ–Ω–∏–µ –∏–∑ —Ñ–∞–π–ª–∞
n = write(fd, buffer, count);    // –ó–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª
close(fd);                       // –ó–∞–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–∞
```

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é:**

```Shell
addr = mmap(addr, length, prot, flags, fd, offset); // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç—å
munmap(addr, length);           // –£–¥–∞–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
brk(addr);                      // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∫—É—á–∏
```

**–°–µ—Ç–µ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:**

```Shell
sockfd = socket(domain, type, protocol); // –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–∫–µ—Ç–∞
bind(sockfd, addr, addrlen);    // –ü—Ä–∏–≤—è–∑–∫–∞ –∞–¥—Ä–µ—Å–∞
connect(sockfd, addr, addrlen); // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
```

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ strace:**

```Shell
# –ë–∞–∑–æ–≤–∞—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞
strace ls -l

# –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
strace -p 1234

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤
strace -c ls -l

# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å–∏—Å—Ç–µ–º–Ω—ã–º –≤—ã–∑–æ–≤–∞–º
strace -e open,read,write program

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª
strace -o trace.log program

# –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
strace -ttt program
```

**–ü—Ä–∏–º–µ—Ä –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–±–ª–µ–º —Å strace:**

```Shell
# –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–∏—Å–∞–µ—Ç - –∏—â–µ–º –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –≤—ã–∑–æ–≤—ã
strace -p 1234

# –ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –º–æ–∂–µ—Ç –æ—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª - –ø—Ä–æ–≤–µ—Ä—è–µ–º open()
strace -e open program

# –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ I/O - –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º read()/write()
strace -c -e trace=file program
```

---
