[üè† –ì–ª–∞–≤–Ω–∞—è](../../README.md) ‚Üí [üêß Linux](../../README.md#-linux) ‚Üí [üîÑ L-05-–ü—Ä–æ—Ü–µ—Å—Å-–∑–∞–≥—Ä—É–∑–∫–∏](../../README.md#-l-05-–ø—Ä–æ—Ü–µ—Å—Å-–∑–∞–≥—Ä—É–∑–∫–∏)

---

# üîÑL-05-3-–Ø–¥—Ä–æ-–∏-initramfs

## –Ø–¥—Ä–æ Linux:

–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –û–°, —É–ø—Ä–∞–≤–ª—è—é—â–∏–π —Ä–µ—Å—É—Ä—Å–∞–º–∏ –∏ –∞–ø–ø–∞—Ä–∞—Ç—É—Ä–æ–π.

**–§–∞–π–ª—ã —è–¥—Ä–∞ –≤ `/boot/`:**

```Shell
vmlinuz-5.4.0-42-generic     # –°–∂–∞—Ç–æ–µ —è–¥—Ä–æ
initrd.img-5.4.0-42-generic  # initramfs
config-5.4.0-42-generic      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
```

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**

```Shell
uname -r                      # –í–µ—Ä—Å–∏—è —è–¥—Ä–∞
cat /proc/version             # –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
dpkg -l | grep linux-image    # –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —è–¥—Ä–∞ (Debian/Ubuntu)
```

## **vmlinuz - —Å–∂–∞—Ç–æ–µ —è–¥—Ä–æ**:

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**

- –ó–∞–≥—Ä—É–∑–æ—á–Ω—ã–π –∫–æ–¥ (–¥–µ–∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä)

- –°–∂–∞—Ç–æ–µ —è–¥—Ä–æ (gzip/xz)

- –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Å—É–º–º—ã

**–ü—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏:**

1. GRUB –∑–∞–≥—Ä—É–∂–∞–µ—Ç vmlinuz –≤ –ø–∞–º—è—Ç—å

2. –î–µ–∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç —è–¥—Ä–æ

3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥—Å–∏—Å—Ç–µ–º —è–¥—Ä–∞

4. –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ—Ä–Ω–µ–≤–æ–π –§–°

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏:**

```Shell
cat /proc/cmdline            # –¢–µ–∫—É—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
# –ü—Ä–∏–º–µ—Ä: BOOT_IMAGE=/boot/vmlinuz-5.4.0-42-generic root=UUID=... ro quiet splash
```

## **initramfs - –≤—Ä–µ–º–µ–Ω–Ω–∞—è –∫–æ—Ä–Ω–µ–≤–∞—è –§–°**:

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**

- –ó–∞–≥—Ä—É–∑–∫–∞ –¥—Ä–∞–π–≤–µ—Ä–æ–≤ –¥–ª—è –∫–æ—Ä–Ω–µ–≤–æ–π –§–°

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ LVM, RAID, —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

- –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–π –∫–æ—Ä–Ω–µ–≤–æ–π –§–°

- –ó–∞–ø—É—Å–∫ systemd

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ initramfs:**

```Shell
# –°–æ–¥–µ—Ä–∂–∏–º–æ–µ initramfs
/bin/                        # –ë–∞–∑–æ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã
/sbin/                       # –°–∏—Å—Ç–µ–º–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
/lib/                        # –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ –¥—Ä–∞–π–≤–µ—Ä—ã
/etc/                        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
/init                        # –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
```

**–°–æ–∑–¥–∞–Ω–∏–µ initramfs:**

```Shell
# –†—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ
mkinitramfs -o /tmp/initrd.img

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
lsinitramfs /boot/initrd.img-5.4.0-42-generic
```

## **–ü—Ä–æ—Ü–µ—Å—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏**:

```Shell
1. –Ø–¥—Ä–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
2. –ú–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è initramfs –∫–∞–∫ –∫–æ—Ä–Ω–µ–≤–∞—è –§–°
3. –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è /init –∏–∑ initramfs
4. –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥—Ä–∞–π–≤–µ—Ä—ã –¥–ª—è –∫–æ—Ä–Ω–µ–≤–æ–π –§–°
5. –ú–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω–∞—è –∫–æ—Ä–Ω–µ–≤–∞—è –§–°
6. –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è systemd (PID 1)
```

---

‚úçÔ∏è**–í–æ–ø—Ä–æ—Å—ã**

1. –ß—Ç–æ —Ç–∞–∫–æ–µ vmlinuz –∏ –∫–∞–∫ –æ–Ω–æ —É—Å—Ç—Ä–æ–µ–Ω–æ?

2. –ó–∞—á–µ–º –Ω—É–∂–µ–Ω initramfs?

3. –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–µ—Ä—Å–∏—é —è–¥—Ä–∞?

4. –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –¥–µ–∫–æ–º–ø—Ä–µ—Å—Å–∏–∏ vmlinuz?

5. –ö–∞–∫–∏–µ –¥—Ä–∞–π–≤–µ—Ä—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ initramfs?

6. –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å initramfs –≤—Ä—É—á–Ω—É—é?

7. –ß—Ç–æ —Ç–∞–∫–æ–µ PID 1 –∏ –ø–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ?

8. –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏ —è–¥—Ä–∞?

9. –í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É initrd –∏ initramfs?

10. –ö–∞–∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —è–¥—Ä–∞?
