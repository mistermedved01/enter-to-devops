[🏠 Главная](../../README.md) → [🐧 Linux](../../README.md#-linux) → [💾 L-06-Управление-памятью](../../README.md#-l-06-управление-памятью)

---

# 💾L-06-3-SWAP

## Что такое SWAP?

**SWAP** - это специальное пространство на диске, которое используется, когда оперативной памяти (RAM) не хватает для выполнения всех запущенных процессов.

**Принцип работы:**

```Shell
┌─────────────────┐    Неактивные страницы    ┌─────────────────┐
│   Оперативная   │ ←──────────────────────→  │  SWAP на диске  │
│   память (RAM)  │    Активные страницы      │                 │
└─────────────────┘ →──────────────────────→  └─────────────────┘
```

## Типы SWAP в Linux:

#### **1. SWAP-раздел**

- Выделенный раздел на жестком диске

- Более высокая производительность

- Рекомендуется для серверов

#### **2. SWAP-файл**

- Обычный файл в файловой системе

- Легче создавать и изменять размер

- Удобно для виртуальных машин и облачных сред

## Создание и настройка SWAP:

**Создание SWAP-файла:**

```Shell
# 1. Создание файла нужного размера
sudo dd if=/dev/zero of=/swapfile bs=1M count=2048  # 2GB файл

# 2. Безопасные права (только root)
sudo chmod 600 /swapfile

# 3. Форматирование как SWAP
sudo mkswap /swapfile

# 4. Активация SWAP
sudo swapon /swapfile

# 5. Проверка
sudo swapon --show
```

**Создание SWAP-раздела:**

```Shell
# 1. Создание раздела (например, /dev/sda3)
sudo fdisk /dev/sda

# 2. Форматирование
sudo mkswap /dev/sda3

# 3. Активация
sudo swapon /dev/sda3
```

## Управление SWAP:

**Просмотр информации:**

```Shell
free -h                    # Общая информация о памяти
swapon --show             # Активные SWAP устройства
cat /proc/swaps           # Детальная информация
```

**Отключение SWAP:**

```Shell
sudo swapoff /swapfile    # Отключить SWAP-файл
sudo swapoff /dev/sda3    # Отключить SWAP-раздел
sudo swapoff -a           # Отключить все SWAP
```

**Постоянная настройка:**

```Shell
# Добавить в /etc/fstab для автозагрузки
echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab
```

---

✍️**Вопросы**

1. Что такое SWAP и зачем он нужен?

2. В чем разница между SWAP-файлом и SWAP-разделом?

3. Как создать SWAP-файл?

4. Как активировать и деактивировать SWAP?

5. Как посмотреть информацию о SWAP?

6. Как сделать SWAP постоянным?

7. Какой размер SWAP рекомендуется?

8. В чем недостатки использования SWAP?

9. Как оптимизировать работу SWAP?

10. Когда стоит отключить SWAP?
