[ğŸ  Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ](../../README.md) â†’ [âš™ï¸ Configuration-Management](../../README.md#-configuration-management) â†’ [ğŸš€ A-01-Basics](../../README.md#-a-01-basics)

---

# âš™ï¸A-01-2-Ansible-Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°-Ğ¸-Ğ¸Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€ÑŒ
> ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ansible, ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¸Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€ĞµĞ¼, Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹, Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ, Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¸Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€ÑŒ Ğ¸ Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ…Ğ¾ÑÑ‚Ğ¾Ğ².

---

<details>
<summary><b>ğŸ¯ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ansible</b></summary>

---

### ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

```text
# ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ansible
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Control Node                       â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  Inventory  â”‚  â”‚  Playbooks  â”‚               â”‚
â”‚  â”‚   (YAML)    â”‚  â”‚   (YAML)    â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚           â”‚               â”‚                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Modules   â”‚  â”‚  Plugins    â”‚  â”‚  Config  â”‚ â”‚
â”‚  â”‚  (Python)   â”‚  â”‚ (Various)   â”‚  â”‚ (INI)    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚               â”‚               â”‚
           â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Managed     â”‚  â”‚ Managed     â”‚  â”‚ Managed     â”‚
â”‚   Node 1    â”‚  â”‚   Node 2    â”‚  â”‚   Node N    â”‚
â”‚             â”‚  â”‚             â”‚  â”‚             â”‚
â”‚ â€¢ Python    â”‚  â”‚ â€¢ Python    â”‚  â”‚ â€¢ Python    â”‚
â”‚ â€¢ SSH       â”‚  â”‚ â€¢ SSH       â”‚  â”‚ â€¢ SSH       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞŸÑ€Ğ¾Ñ†ĞµÑÑ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ playbook

```text
# Workflow Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ:
1. ğŸ“‹ ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ Inventory - Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ñ…Ğ¾ÑÑ‚Ğ¾Ğ² Ğ¸ Ğ³Ñ€ÑƒĞ¿Ğ¿
2. ğŸ” Ğ¡Ğ±Ğ¾Ñ€ Facts - Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼ managed node
3. ğŸ“ Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ Tasks - Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğµ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ
4. ğŸ”„ ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Handlers - Ğ¿Ğ¾ Ñ‚Ñ€Ğ¸Ğ³Ğ³ĞµÑ€Ğ°Ğ¼ notify
5. ğŸ“Š Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ Results - ÑĞ±Ğ¾Ñ€ Ğ¸ Ğ²Ñ‹Ğ²Ğ¾Ğ´ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²

# Ğ”Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ñ…Ğ¾ÑÑ‚Ğ°:
â€¢ SSH Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ
â€¢ ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ Python
â€¢ Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ
â€¢ Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
â€¢ Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ JSON Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°
```

### ĞœĞ¾Ğ´ĞµĞ»ÑŒ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ

```text
# Push vs Pull Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Push Model    â”‚   Pull Model    â”‚
â”‚    (Ansible)    â”‚   (Puppet/Chef) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Control Node    â”‚ Managed Nodes   â”‚
â”‚ Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ¸Ñ€ÑƒĞµÑ‚      â”‚ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´Ğ¸Ñ‡ĞµÑĞºĞ¸    â”‚
â”‚ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ      â”‚ Ğ·Ğ°Ğ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°ÑÑ‚     â”‚
â”‚                 â”‚ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ    â”‚
â”‚                 â”‚                 â”‚
â”‚ âœ… ĞœĞ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ¾Ğµ   â”‚ âœ… Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚     â”‚
â”‚   Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ    â”‚   Ğ±ĞµĞ· Ğ¿Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ğ¾Ğ¹â”‚
â”‚ âœ… Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°-â”‚   ÑĞ²ÑĞ·Ğ¸         â”‚
â”‚   Ğ½Ğ¾Ğµ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµâ”‚ âŒ Ğ—Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ°     â”‚
â”‚ âŒ Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚      â”‚   Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹    â”‚
â”‚   Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ÑÑ‚Ğ¸   â”‚ âŒ Ğ¡Ğ»Ğ¾Ğ¶Ğ½ĞµĞµ      â”‚
â”‚   Control Node  â”‚   Ğ¾Ñ‚Ğ»Ğ°Ğ´ĞºĞ°       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

</details>

<details>
<summary><b>ğŸ“‹ Ğ¡Ñ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¸Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€ÑŒ</b></summary>

---

### Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ ÑĞ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸Ñ INI

```text
# ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğ¹ inventory Ñ„Ğ°Ğ¹Ğ» (INI Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚)
[web_servers]
web1.example.com
web2.example.com

[db_servers] 
db1.example.com
db2.example.com

[production:children]
web_servers
db_servers

[production:vars]
ansible_user=ubuntu
ansible_ssh_private_key_file=~/.ssh/production_key
```

### YAML Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ¸Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€Ñ

```yaml
# inventory/hosts.yml
all:
  children:
    web_servers:
      hosts:
        web1:
          ansible_host: 192.168.1.10
          ansible_user: ubuntu
        web2:
          ansible_host: 192.168.1.11
          ansible_user: deploy
      vars:
        web_package: nginx
        web_port: 80
    
    db_servers:
      hosts:
        db1:
          ansible_host: 192.168.1.20
        db2:
          ansible_host: 192.168.1.21
      vars:
        db_package: postgresql
        db_port: 5432
    
    production:
      children:
        web_servers:
        db_servers:
      vars:
        environment: production
        timezone: Europe/Moscow
```

### Ğ“Ñ€ÑƒĞ¿Ğ¿Ñ‹ Ğ¸ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ

```text
# Ğ˜ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ñ Ğ³Ñ€ÑƒĞ¿Ğ¿
[production:children]
web_servers
db_servers
monitoring_servers

[staging:children]
staging_web
staging_db

# ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ½Ğ° Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… ÑƒÑ€Ğ¾Ğ²Ğ½ÑÑ…:
1. Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ (group_vars/all.yml)
2. Ğ“Ñ€ÑƒĞ¿Ğ¿Ñ‹ (group_vars/web_servers.yml)
3. Ğ¥Ğ¾ÑÑ‚Ñ‹ (host_vars/host1.yml)
4. Ğ’ inventory Ñ„Ğ°Ğ¹Ğ»Ğµ
```

---

</details>

<details>
<summary><b>ğŸ”„ Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¸Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€ÑŒ</b></summary>

---

### ĞšĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ñ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ¸Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€Ñ

```text
# Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¸Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€ÑŒ - ÑĞºÑ€Ğ¸Ğ¿Ñ‚, Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ÑÑ‰Ğ¸Ğ¹ JSON
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    JSON     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Cloud API     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚  Ansible        â”‚
â”‚   (AWS, GCP)    â”‚             â”‚  Inventory      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                               â”‚
         â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Database      â”‚             â”‚   File System   â”‚
â”‚   (MySQL)       â”‚             â”‚   (CSV, YAML)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### AWS EC2 Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¸Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€ÑŒ

```bash
#!/bin/bash
# aws_ec2.py - ÑĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ´Ğ»Ñ AWS EC2

# Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° boto3
pip3 install boto3

# ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° AWS credentials
aws configure

# Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ¸Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€Ñ
ansible-playbook -i aws_ec2.py playbook.yml

# Ğ¡ ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼
ansible-playbook -i aws_ec2.py --cache playbook.yml
```

### Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ÑĞ¾Ğ±ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ¸Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€Ñ

```python
#!/usr/bin/env python3
# custom_inventory.py

import json
import sys

def get_inventory():
    """Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ¸Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€ÑŒ Ğ² Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ Ansible"""
    inventory = {
        "_meta": {
            "hostvars": {}
        },
        "web_servers": {
            "hosts": ["web1", "web2"],
            "vars": {
                "web_package": "nginx"
            }
        },
        "db_servers": {
            "hosts": ["db1"],
            "vars": {
                "db_package": "postgresql"
            }
        }
    }
    
    # Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ hostvars
    inventory["_meta"]["hostvars"]["web1"] = {
        "ansible_host": "192.168.1.10",
        "ansible_user": "ubuntu"
    }
    
    return inventory

if __name__ == "__main__":
    print(json.dumps(get_inventory(), indent=2))
```

---

</details>

<details>
<summary><b>ğŸ“Š Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¼Ğ¸</b></summary>

---

### Ğ˜ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ñ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ…

```text
# ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… (Ğ¾Ñ‚ Ğ²Ñ‹ÑÑˆĞµĞ³Ğ¾ Ğº Ğ½Ğ¸Ğ·ÑˆĞµĞ¼Ñƒ):
1. Command line variables (-e)
2. Playbook variables (vars:)
3. Host variables (host_vars/)
4. Group variables (group_vars/)
5. Inventory variables
6. Facts (gathered automatically)
7. Role defaults

# Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³Ğ¾Ğ²:
inventory/
â”œâ”€â”€ hosts
â”œâ”€â”€ group_vars/
â”‚   â”œâ”€â”€ all.yml
â”‚   â”œâ”€â”€ web_servers.yml
â”‚   â””â”€â”€ db_servers.yml
â””â”€â”€ host_vars/
    â”œâ”€â”€ web1.yml
    â””â”€â”€ db1.yml
```

### ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ² playbook

```yaml
---
- name: Configure web servers
  hosts: web_servers
  vars:
    web_package: nginx
    web_port: 80
    web_user: www-data
  
  tasks:
    - name: Install web server
      package:
        name: "{{ web_package }}"
        state: present
    
    - name: Start web service
      service:
        name: "{{ web_package }}"
        state: started
        enabled: yes
```

### Ğ¤Ğ°ĞºÑ‚Ñ‹ Ğ¸ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ

```bash
# ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ²ÑĞµÑ… Ñ„Ğ°ĞºÑ‚Ğ¾Ğ² Ñ…Ğ¾ÑÑ‚Ğ°
ansible host1 -m setup

# ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ñ… Ñ„Ğ°ĞºÑ‚Ğ¾Ğ²
ansible host1 -m setup -a "filter=ansible_distribution*"

# Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ„Ğ°ĞºÑ‚Ğ¾Ğ² Ğ² playbook
ansible host1 -m debug -a "var=ansible_distribution"
```

---

</details>

<details>
<summary><b>ğŸ”§ ĞÑ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€Ñ</b></summary>

---

### ĞœĞ½Ğ¾Ğ³Ğ¾ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ²Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°

```text
# Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¸Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€Ñ
inventory/
â”œâ”€â”€ production/
â”‚   â”œâ”€â”€ hosts
â”‚   â”œâ”€â”€ group_vars/
â”‚   â””â”€â”€ host_vars/
â”œâ”€â”€ staging/
â”‚   â”œâ”€â”€ hosts
â”‚   â”œâ”€â”€ group_vars/
â”‚   â””â”€â”€ host_vars/
â””â”€â”€ development/
    â”œâ”€â”€ hosts
    â”œâ”€â”€ group_vars/
    â””â”€â”€ host_vars/

# Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:
ansible-playbook -i inventory/production/hosts playbook.yml
ansible-playbook -i inventory/staging/hosts playbook.yml
```

### ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ğ¹

```yaml
# group_vars/all.yml
---
# Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ
ansible_user: ubuntu
timezone: Europe/Moscow
package_manager: apt

# group_vars/production.yml
---
# Production Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ
environment: production
debug: false
log_level: error

# group_vars/staging.yml
---
# Staging Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ
environment: staging
debug: true
log_level: info
```

### Ğ˜Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€ÑŒ Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… Ğ¾Ğ±Ğ»Ğ°ĞºĞ¾Ğ²

```text
# ĞœÑƒĞ»ÑŒÑ‚Ğ¸-Ğ¾Ğ±Ğ»Ğ°Ñ‡Ğ½Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°
inventory/
â”œâ”€â”€ aws/
â”‚   â”œâ”€â”€ aws_ec2.py
â”‚   â””â”€â”€ group_vars/
â”œâ”€â”€ gcp/
â”‚   â”œâ”€â”€ gcp_compute.py
â”‚   â””â”€â”€ group_vars/
â””â”€â”€ azure/
    â”œâ”€â”€ azure_rm.py
    â””â”€â”€ group_vars/

# Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… Ğ¾Ğ±Ğ»Ğ°ĞºĞ¾Ğ²:
ansible-playbook -i inventory/aws/aws_ec2.py playbook.yml
ansible-playbook -i inventory/gcp/gcp_compute.py playbook.yml
```

---

</details>

<details>
<summary><b>ğŸ¯ ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ñ‹</b></summary>

---

### Best Practices Ğ¸Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€Ñ

```text
âœ… Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ YAML Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ´Ğ»Ñ ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ñ… ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€
âœ… ĞÑ€Ğ³Ğ°Ğ½Ğ¸Ğ·ÑƒĞ¹Ñ‚Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¿Ğ¾ ÑƒÑ€Ğ¾Ğ²Ğ½ÑĞ¼
âœ… ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ÑĞ¹Ñ‚Ğµ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¸Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€ÑŒ Ğ´Ğ»Ñ Ğ¾Ğ±Ğ»Ğ°ĞºĞ¾Ğ²
âœ… Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ Ğ¸Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€Ñ
âœ… Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹ Ğ´Ğ»Ñ Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
âœ… ĞšÑÑˆĞ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¸Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€ÑŒ
```

### Ğ§Ñ‚Ğ¾ Ğ¸Ğ·ÑƒÑ‡Ğ°ĞµĞ¼ Ğ´Ğ°Ğ»ÑŒÑˆĞµ

```text
ğŸ“š Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ°Ñ Ñ‚ĞµĞ¼Ğ°: Ad-Hoc ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹
ğŸ¯ ĞŸÑ€Ğ°ĞºÑ‚Ğ¸ĞºĞ°: Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğµ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ±ĞµĞ· playbook
ğŸ”§ Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹: ĞœĞ¾Ğ´ÑƒĞ»Ğ¸ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ²ÑĞµĞ´Ğ½ĞµĞ²Ğ½Ñ‹Ñ… Ğ·Ğ°Ğ´Ğ°Ñ‡
```

---

</details>
