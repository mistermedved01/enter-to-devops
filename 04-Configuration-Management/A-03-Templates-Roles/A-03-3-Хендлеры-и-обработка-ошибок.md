[🏠 Главная](../../README.md) → [⚙️ Configuration-Management](../../README.md#-configuration-management) → [📝 A-03-Templates-Roles](../../README.md#-a-03-templates-roles)

---

# ⚙️A-03-3-Хендлеры-и-обработка-ошибок
> Управление событиями в Ansible: хендлеры, обработка ошибок, блоки rescue/always, уведомления и отказоустойчивость.

---

<details>
<summary><b>🎯 Что такое хендлеры</b></summary>

---

### Концепция хендлеров

+++text
# Хендлеры - специальные задачи по событиям
┌─────────────────┐    notify     ┌─────────────────┐
│    Task         │ ────────────→ │   Handler       │
│ (изменяет       │               │ (реагирует на   │
│  конфиг)        │               │  изменение)     │
└─────────────────┘               └─────────────────┘

Особенности хендлеров:
• Выполняются только при изменении (changed)
• В конце play, даже если вызваны несколько раз
• Порядок выполнения определяется порядком определения
• Могут быть уведомлены из разных задач
---text

### Когда использовать хендлеры

+++text
🔄 Перезапуск сервисов:
• После изменения конфигурации
• После установки пакетов
• После обновления приложений

🔧 Системные операции:
• Перезагрузка системы
• Очистка кэша
• Обновление индексов
---text

### Базовый синтаксис

+++yaml
---
- name: Configure nginx
  hosts: web_servers
  tasks:
    - name: Install nginx
      package:
        name: nginx
        state: present
    
    - name: Configure nginx
      template:
        src: nginx.conf.j2
        dest: /etc/nginx/nginx.conf
      notify: restart nginx
  
  handlers:
    - name: restart nginx
      service:
        name: nginx
        state: restarted
---yaml

---

</details>

<details>
<summary><b>🎯 Ключевые выводы</b></summary>

---

### Best Practices хендлеров

+++text
✅ Используйте хендлеры для перезапуска сервисов
✅ Применяйте rescue блоки для обработки ошибок
✅ Документируйте критичные операции
✅ Тестируйте обработку ошибок
✅ Используйте always блоки для очистки
---text

### Что изучаем дальше

+++text
📚 Следующая тема: Работа с файлами и пакетами
🎯 Практика: Управление файловой системой
🔧 Инструменты: Модули для файлов и пакетов
---text

---

</details>
