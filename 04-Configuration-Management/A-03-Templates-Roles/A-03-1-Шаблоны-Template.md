[üè† –ì–ª–∞–≤–Ω–∞—è](../../README.md) ‚Üí [‚öôÔ∏è Configuration-Management](../../README.md#-configuration-management) ‚Üí [üìù A-03-Templates-Roles](../../README.md#-a-03-templates-roles)

---

# ‚öôÔ∏èA-03-1-–®–∞–±–ª–æ–Ω—ã-Template
> –†–∞–±–æ—Ç–∞ —Å —à–∞–±–ª–æ–Ω–∞–º–∏ Jinja2 –≤ Ansible: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤, —Ñ–∏–ª—å—Ç—Ä—ã, –º–∞–∫—Ä–æ—Å—ã –∏ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ.

---

<details>
<summary><b>üéØ –ß—Ç–æ —Ç–∞–∫–æ–µ —à–∞–±–ª–æ–Ω—ã –≤ Ansible</b></summary>

---

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è —à–∞–±–ª–æ–Ω–æ–≤ Jinja2

+++text
# –®–∞–±–ª–æ–Ω—ã - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    –®–∞–±–ª–æ–Ω     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ    ‚îÇ ‚Üí (Jinja2)  ‚Üí ‚îÇ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ‚îÇ
‚îÇ   Ansible       ‚îÇ               ‚îÇ     —Ñ–∞–π–ª—ã       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
‚úÖ –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
‚úÖ –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ –ª–æ–≥–∏–∫–∏
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å–ª–æ–∂–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥–æ–≤
---text

### –ú–æ–¥—É–ª—å template

+++yaml
# –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è template
- name: Generate nginx configuration
  template:
    src: nginx.conf.j2
    dest: /etc/nginx/nginx.conf
    backup: yes
    owner: root
    group: root
    mode: '0644'
  notify: restart nginx
---yaml

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω—ã

+++text
üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
‚Ä¢ nginx.conf, apache2.conf
‚Ä¢ database.cnf, redis.conf
‚Ä¢ systemd service files
‚Ä¢ environment files

üìä –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ:
‚Ä¢ IP –∞–¥—Ä–µ—Å–∞ –∏ –ø–æ—Ä—Ç—ã
‚Ä¢ –ü—É—Ç–∏ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º
‚Ä¢ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –≥—Ä—É–ø–ø—ã
‚Ä¢ –í–µ—Ä—Å–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
---text

---

</details>

<details>
<summary><b>üìù –ë–∞–∑–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å Jinja2</b></summary>

---

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —à–∞–±–ª–æ–Ω–∞—Ö

+++text
# templates/nginx.conf.j2
server {
    listen {{ nginx_port | default(80) }};
    server_name {{ server_name }};
    root {{ document_root }};
    
    location / {
        try_files $uri $uri/ =404;
    }
    
    {% if ssl_enabled %}
    listen 443 ssl;
    ssl_certificate {{ ssl_cert_path }};
    ssl_certificate_key {{ ssl_key_path }};
    {% endif %}
}
---text

### –£—Å–ª–æ–≤–∏—è –∏ —Ü–∏–∫–ª—ã

+++text
# templates/hosts.j2
{% for host in backend_servers %}
{{ host.ip }} {{ host.name }}
{% endfor %}

{% if load_balancer %}
upstream backend {
    {% for server in backend_servers %}
    server {{ server.ip }}:{{ server.port }};
    {% endfor %}
}
{% endif %}
---text

### –§–∏–ª—å—Ç—Ä—ã

+++text
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
{{ database_url | urlparse('hostname') }}
{{ secret_key | hash('sha256') }}
{{ user_list | join(',') }}
{{ config_value | default('default_value') }}
{{ file_content | regex_replace('old', 'new') }}
---text

---

</details>

<details>
<summary><b>üéØ –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã</b></summary>

---

### Best Practices —à–∞–±–ª–æ–Ω–æ–≤

+++text
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
‚úÖ –ü—Ä–∏–º–µ–Ω—è–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É
‚úÖ –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —à–∞–±–ª–æ–Ω—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
---text

### –ß—Ç–æ –∏–∑—É—á–∞–µ–º –¥–∞–ª—å—à–µ

+++text
üìö –°–ª–µ–¥—É—é—â–∞—è —Ç–µ–º–∞: –†–æ–ª–∏ Roles
üéØ –ü—Ä–∞–∫—Ç–∏–∫–∞: –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –∫–æ–¥–∞
üîß –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–æ–ª–µ–π
---text

---

</details>
