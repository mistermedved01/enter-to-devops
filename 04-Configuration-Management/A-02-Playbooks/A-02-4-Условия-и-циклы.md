[üè† –ì–ª–∞–≤–Ω–∞—è](../../README.md) ‚Üí [‚öôÔ∏è Configuration-Management](../../README.md#-configuration-management) ‚Üí [üìù A-02-Playbooks](../../README.md#-a-02-playbooks)

---

# ‚öôÔ∏èA-02-4-–£—Å–ª–æ–≤–∏—è-–∏-—Ü–∏–∫–ª—ã
> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ Ansible: —É—Å–ª–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã, —Ü–∏–∫–ª—ã, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ —Å–ª–æ–∂–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

---

<details>
<summary><b>üéØ –£—Å–ª–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã</b></summary>

---

### –ë–∞–∑–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å when

```yaml
# –ü—Ä–æ—Å—Ç—ã–µ —É—Å–ª–æ–≤–∏—è —Å when
---
- name: Conditional execution examples
  hosts: all
  tasks:
    - name: Install package only on Debian
      package:
        name: nginx
        state: present
      when: ansible_os_family == "Debian"
    
    - name: Install package only on RedHat
      package:
        name: httpd
        state: present
      when: ansible_os_family == "RedHat"
```

### –°–ª–æ–∂–Ω—ã–µ —É—Å–ª–æ–≤–∏—è

```yaml
---
- name: Complex conditions
  hosts: all
  tasks:
    - name: Install nginx on Ubuntu 20.04
      package:
        name: nginx
        state: present
      when: 
        - ansible_distribution == "Ubuntu"
        - ansible_distribution_version == "20.04"
    
    - name: Install Apache on CentOS 7
      package:
        name: httpd
        state: present
      when: 
        - ansible_distribution == "CentOS"
        - ansible_distribution_major_version == "7"
```

---

</details>

<details>
<summary><b>üîÑ –¶–∏–∫–ª—ã –∏ –∏—Ç–µ—Ä–∞—Ü–∏–∏</b></summary>

---

### –ë–∞–∑–æ–≤—ã–µ —Ü–∏–∫–ª—ã

```yaml
---
- name: Loop examples
  hosts: all
  tasks:
    - name: Install multiple packages
      package:
        name: "{{ item }}"
        state: present
      loop:
        - nginx
        - curl
        - wget
    
    - name: Create multiple directories
      file:
        path: "{{ item }}"
        state: directory
        mode: '0755'
      loop:
        - /var/www
        - /var/log/nginx
        - /etc/nginx/sites-available
```

### –¶–∏–∫–ª—ã —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

```yaml
---
- name: Advanced loops
  hosts: all
  tasks:
    - name: Create users with specific UIDs
      user:
        name: "{{ item.name }}"
        uid: "{{ item.uid }}"
        state: present
      loop:
        - name: deploy
          uid: 1001
        - name: backup
          uid: 1002
```

---

</details>

<details>
<summary><b>üéØ –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã</b></summary>

---

### Best Practices —É—Å–ª–æ–≤–∏–π –∏ —Ü–∏–∫–ª–æ–≤

```text
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ—Å—Ç—ã–µ —É—Å–ª–æ–≤–∏—è –∫–æ–≥–¥–∞ –≤–æ–∑–º–æ–∂–Ω–æ
‚úÖ –ü—Ä–∏–º–µ–Ω—è–π—Ç–µ —Ü–∏–∫–ª—ã –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –∑–∞–¥–∞—á
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É
‚úÖ –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —É—Å–ª–æ–≤–∏—è –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ register –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
```

### –ß—Ç–æ –∏–∑—É—á–∞–µ–º –¥–∞–ª—å—à–µ

```text
üìö –°–ª–µ–¥—É—é—â–∞—è —Ç–µ–º–∞: –®–∞–±–ª–æ–Ω—ã Template
üéØ –ü—Ä–∞–∫—Ç–∏–∫–∞: –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
üîß –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: Jinja2 —à–∞–±–ª–æ–Ω—ã
```

---

</details>
